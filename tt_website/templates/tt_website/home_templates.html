{% extends 'tt_website/template_website_booking.html' %}
{% load i18n %}
{% load static from staticfiles %}
{% block content %}
<script src="{{ static_path }}js/webservice_agent.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_content.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_token.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_activity.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_train.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_tour.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_airline.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_hotel.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_visa.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_passport.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_account.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_ppob.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_event.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_medical.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_medical_global.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_swab_express.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_mitra_keluarga.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_sentra_medika.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_lab_pintar.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_bus.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_insurance.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/agent_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/ppob_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/train_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/bus_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/passport_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/visa_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/activity_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/airline_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/hotel_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/tour_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/event_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/medical_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/swab_express_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/mitra_keluarga_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/sentra_medika_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/lab_pintar_javascript.js?version={{javascript_version}}"></script>
<!--<script src="{{ static_path }}js/webservice_bank.js?version={{javascript_version}}"></script>-->
<script src="{{ static_path }}js/library/moment.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/library/daterangepicker.js?version={{javascript_version}}"></script>
<!--<link rel="stylesheet" type="text/css" href="{{ static_path }}login/css/owl.carousel.css?version={{javascript_version}}">-->
<!--<link rel="stylesheet" type="text/css" href="{{ static_path }}login/css/owl.theme.default.min.css?version={{javascript_version}}">-->
<!--<link rel="stylesheet" type="text/css" href="{{ static_path }}login/css/owl.theme.green.min.css?version={{javascript_version}}">-->
<script src="{{ static_path }}js/vendor/owl.carousel.min.js?version={{javascript_version}}"></script>
{%if app_id_one_signal != '' %}
<script src="https://cdn.onesignal.com/sdks/OneSignalSDK.js" async=""></script>
{% endif %}
<script>
    signature = `{{signature}}`;

    terms_value = {{terms_value}};
    promotion_banner_value = '{{promotion_banner_value}}';

    static_path_url_server = '{{static_path_url_server}}'
    airline_advance_pax_type = '{{airline_advance_pax_type}}';
    airline_pax_type_student = '{{airline_pax_type_student}}';
    airline_pax_type_labour = '{{airline_pax_type_labour}}';
    airline_pax_type_seaman = '{{airline_pax_type_seaman}}';
    name = '';
    cabin_class = [];
    {% for airline_cabin_class in airline_cabin_class_list %}
        cabin_class.push({
            'name': `{{airline_cabin_class.name}}`,
            'value': `{{airline_cabin_class.value}}`
        })
    {% endfor %}

    airline_carriers = [];
    {% if username.co_user_name != '' and '{{google_analytics}}' != '' %}
        {% if 'b2c_limitation' in username.co_agent_frontend_security %}
          gtag('event', 'b2c', {'agent_type':'b2c'});
        {% endif %}
    {% endif %}
</script>

{%if app_id_one_signal != '' %}
<script>
    var app_id_one_signal = '{{app_id_one_signal}}';
    if(app_id_one_signal){
        var OneSignal = window.OneSignal || [];
        var initConfig = {
            appId: "{{app_id_one_signal}}",
            notifyButton: {
                enable: true
            },
        };
        OneSignal.push(function () {
            OneSignal.SERVICE_WORKER_PARAM = { scope: '/onesignal/' };
            OneSignal.SERVICE_WORKER_PATH = '{{ static_path }}/onesignal/OneSignalSDKWorker.js'
            OneSignal.SERVICE_WORKER_UPDATER_PATH = '{{ static_path }}/onesignal/OneSignalSDKUpdaterWorker.js'
            OneSignal.init(initConfig);
        });
    }
</script>
{% endif %}

<style>
    {% if template == 6%}
        header{
            background:unset;
            position: absolute;
        }
    {% endif %}

    {% if template == 4 or template == 5 %}
        .dropdown-menu-txt{
            top: 30px !important;
        }
    {% else %}
        .dropdown-menu-txt{
            top: 5px !important;
        }
    {% endif %}

    @media only screen and (min-width: 991px) {
        #slider_home {
            margin-top: 88px;
        }
    }
    @media only screen and (max-width: 990px) {
        #slider_home {
            margin-top: 0px;
        }
        #logo_home {
            padding-top:10px;
        }
    }
</style>
<title>{{name}} - {% trans 'Home' %}</title>

{% if username.co_user_login != '' %}
{% include 'tt_website/plugin_passenger.html' %}
{% include 'tt_website/plugin_corporate.html' %}
{% include 'tt_website/booking_from_vendor_airline.html' %}
{% include 'tt_website/plugin_get_booking_b2c.html' %}
<!--{% include 'tt_website/loading_screen.html' %}-->
{% include 'tt_website/logout.html' %}
{% endif %}
{% include 'tt_website/header.html' %}
{% include 'tt_website/notification_box.html' %}

{% if username.co_user_login != default_user %}
<section class="section_bg" style="z-index:998; position:relative; border-top:1px solid #cdcdcd; background:white;">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 pt-2 pb-2">
                <span class="span_link" style="border-right:2px solid #cdcdcd; padding-right:5px; color:black;" onclick="location='{% url 'tt_website:issued_offline'%}'"><i class="fas fa-book-open"></i> {% trans 'Issued Offline' %}</span>
                {% if "groupbooking" in provider and "ticketing_group_booking" in username.co_agent_frontend_security%}
                <span class="span_link" style="padding-left:5px; color: black;" onclick="location='{% url 'tt_website:group_booking'%}'"><i class="fas fa-users"></i> {% trans 'Group Booking' %}</span>
                {% endif %}
            </div>
        </div>
    </div>
</section>
{% endif%}
<!--<meta name="twitter:card" content="Twitter" />-->
<!--<meta name="twitter:site" content="@{{name}}" />-->
<!--<meta name="twitter:creator" content="@{{name}}" />-->

<!--wizard hotel testing-->
<div class="modal fade" id="myModalWizardHotel" role="dialog" data-keyboard="false">
    <div class="overlay_modal_custom" data-dismiss="modal"></div>
    <div class="modal-dialog modal_custom_fixed">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <div class="row">
                    <div class="col-xs-6 pb-3">
                        <h4 class="modal-title"><i class="fas fa-hotel"></i> {% trans 'Hotel' %}</h4>
                    </div>
                    <div class="col-xs-6">
                        <button type="button" class="close modal_custom_close" data-dismiss="modal">&times;</button>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <form action="{% url 'tt_website:hotel_search'%}" method="POST" class="form-wrap" id="hotel_searchForm_wizard">
                    {% csrf_token %}
                    <input type="hidden" name="hotel_detail" id='hotel_detail'>
                    <div class="row">
                        <div class="col-lg-12 col-md-12 mb-3">
                            <span><i class="fas fa-calendar-alt"></i> {% trans 'Check-in - Check-out' %}</span>
                            <div class="input-container-search-ticket">
                                <input class="form-control" type="text" name="hotel_checkin_checkout_wizard" id="hotel_checkin_checkout_wizard" placeholder="{% trans 'Check-in - Check-out Date' %} " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Check-In - Check-out Date '" autocomplete="off" style="background:white; height:43px;" readonly/>
                                <i class="fas fa-moon icon-search-ticket" id="total_night_search_wizard" style="padding-right:40px;">1</i>
                            </div>
                            <input class="form-control" type="hidden" name="hotel_checkin_wizard" id="hotel_checkin_wizard" placeholder="Check-In Date " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Check-in Date '" autocomplete="off"/>
                            <input class="form-control" type="hidden" name="hotel_checkout_wizard" id="hotel_checkout_wizard"  autocomplete="off" placeholder="Check-out Date " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Check-out Date '" />
                        </div>

                        <div class="col-lg-12 mb-3">
                            <span><i class="fas fa-users"></i> {% trans 'Guest' %}</span>
                            <div class="input-container-search-ticket btn-group">
                                <button id="show_total_pax_hotel_wizard" style="text-align:left;" type="button" class="form-control dropdown-toggle" data-toggle="dropdown" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap;"></button>
                                <ul class="dropdown-menu" role="menu" style="z-index:5;">
                                    <div class="row" style="padding:10px;">
                                        <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5" style="float:left !important;">
                                            <div style="float:left;">
                                                <label>
                                                    <span style="color:black; font-size:13px;">{% trans 'Room' %}<br/></span>
                                                    <span style="color:gray; font-size:11px;">(Qty >= 1)</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7" style="float:right !important;">
                                            <div style="float:right; display:flex; padding:5px 0px 5px 5px;">
                                                <button type="button" class="left-minus-room-hotel btn-custom-circle" id="left-minus-room-hotel_wizard" data-type="minus" data-field="" disabled>
                                                    <i class="fas fa-minus"></i>
                                                </button>
                                                <input type="text" style="font-size:13px; padding:5px !important; border:none; background:none; text-align:center; width:25px;" id="hotel_room_wizard" name="hotel_room_wizard" value="1" min="1" readonly>
                                                <button type="button" class="right-plus-room-hotel btn-custom-circle" id="right-plus-room-hotel_wizard" data-type="plus" data-field="">
                                                    <i class="fas fa-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5" style="float:left !important;">
                                            <div style="float:left;">
                                                <label>
                                                    <span style="color:black; font-size:13px;">{% trans 'Adult' %}<br/></span>
                                                    <span style="color:gray; font-size:11px;">({% trans 'Age' %} 12+)</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7" style="float:right !important;">
                                            <div style="float:right; display:flex; padding:5px 0px 5px 5px;">
                                                <button type="button" class="left-minus-adult-hotel btn-custom-circle" id="left-minus-adult-hotel_wizard" data-type="minus" data-field="">
                                                    <i class="fas fa-minus"></i>
                                                </button>
                                                <input type="text" style="font-size:13px; padding:5px !important; border:none; background:none; text-align:center; width:25px;" id="hotel_adult_wizard" name="hotel_adult_wizard" value="2" min="1" readonly>
                                                <button type="button" class="right-plus-adult-hotel btn-custom-circle" id="right-plus-adult-hotel_wizard" data-type="plus" data-field="">
                                                    <i class="fas fa-plus"></i>
                                                </button>
                                            </div>
                                        </div>

                                        <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5" style="float:left !important;">
                                            <div style="float:left;">
                                                <label>
                                                    <span style="color:black; font-size:13px;">{% trans 'Child' %}<br/></span>
                                                    <span style="color:gray; font-size:11px;">({% trans 'Age' %} <12)</span>
                                                </label>
                                            </div>
                                        </div>
                                        <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7" style="float:right !important;">
                                            <div style="float:right; display:flex; padding:5px 0px 5px 5px;">
                                                <button type="button" class="left-minus-child-hotel btn-custom-circle" id="left-minus-child-hotel_wizard" data-type="minus" data-field="" disabled>
                                                    <i class="fas fa-minus"></i>
                                                </button>
                                                <input type="text" style="font-size:13px; padding:5px !important; border:none; background:none; text-align:center; width:25px;" id="hotel_child_wizard" name="hotel_child_wizard" value="0" readonly>
                                                <button type="button" class="right-plus-child-hotel btn-custom-circle" id="right-plus-child-hotel_wizard" data-type="plus" data-field="">
                                                    <i class="fas fa-plus"></i>
                                                </button>
                                            </div>
                                        </div>
                                        <div class="col-lg-12">
                                            <div class="row" id="guest_child_age_wizard">

                                            </div>
                                        </div>

                                        <div class="col-lg-12" style="text-align:right;">
                                            <hr/>
                                            <button class="primary-btn" type="button" style="line-height:34px;" onclick="next_focus_element('hotel','passenger_wizard');">Done</button>
                                        </div>
                                    </div>
                                </ul>
                            </div>
                        </div>

                        <div class="col-lg-12 mb-3">
                            <span><i class="fas fa-globe-asia"></i> {% trans 'Guest Nationality' %}</span>
                            <select class="js-example-basic-single" name="hotel_id_nationality_wizard_id" style="width:100%;" id="hotel_id_nationality_wizard_id" placeholder="{% trans 'Guest Nationality' %}" onchange="auto_complete('hotel_id_nationality')" class="nice-select-default">
                                {% for country in countries %}
                                {% if country.name == 'Indonesia'%}
                                <option value="{{country.code}} - {{country.name}}" selected>{{country.code}} - {{country.name}}</option>
                                {% else %}
                                <option value="{{country.code}} - {{country.name}}">{{country.code}} - {{country.name}}</option>
                                {% endif %}
                                {% endfor %}
                            </select>
                            <input type="hidden" value="ID - Indonesia" id="hotel_id_nationality_wizard" class="form-control" name="hotel_id_nationality_wizard" />
                        </div>

                        <div class="col-lg-12" style="margin-top:15px;float:left; display:flex;">
                            <label class="check_box_custom cblabel">
                                <span style="font-size:13px;" id="business_trip_help_show_wizard">{% trans 'Business Trip' %}</span>
                                <input type="checkbox" value="true" onclick="business_trip_check();">
                                <input type="hidden" name="business_trip_wizard" id="business_trip_wizard" value="false"/>
                                <span class="check_box_span_custom cbspan" style="border:1px {{color}} solid"></span>
                            </label>
                            <span id="business_trip_help_wizard" style="cursor:pointer;"><i class="fas fa-question-circle" style="padding:0px 5px;font-size:16px;"></i></span>
                        </div>
                    </div>

                    <center>
                        <button class="button-search primary-btn ld-ext-right" id="btn-search-hotel_wizard" onclick="hotel_wizard_onclick();" type="button" value="Submit">
                            <i class="fas fa-search" style="color:{{text_color}}; font-weight:bold; font-size:18px;"></i>
                            {% trans 'Search' %}
                            <div class="ld ld-ring ld-cycle"></div>
                        </button>
                    </center>
                </form>

            </div>
        </div>
    </div>
</div>

{% if username.co_user_login != '' %}
<input type="hidden" id="country_id"/>
<input type="hidden" id="start"/>
<input type="hidden" id="end"/>
{% endif %}

<!--add template-->

{%if template == 1%}
{% include 'tt_website/html_include/home_template1.html' %}

{% elif template == 2 %}
{% include 'tt_website/html_include/home_template2.html' %}

{% elif template == 3 %}
{% include 'tt_website/html_include/home_template3.html' %}

{% elif template == 4 %}
{% include 'tt_website/html_include/home_template4.html' %}

{% elif template == 5 %}
{% include 'tt_website/html_include/home_template5.html' %}

{% elif template == 6%}
{% include 'tt_website/html_include/home_template6.html' %}

{% elif template == 7%}
{% include 'tt_website/html_include/home_template7.html' %}

{% elif template == 8%}
{% include 'tt_website/html_include/home_template8.html' %}

{%endif%}

{% if small_banner_value == 1 %}
<section class="pt-5 pb-5" style="z-index:0; position:relative; padding-bottom:40px; background:white;">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <!--add template-->
                {% if template == 1 %}
                <div class="menu-content">
                    <div class="title pb-20">
                        <h1>HOT DEALS</h1>
                    </div>
                </div>
                {% elif template == 2 %}
                <div class="section-heading wow fadeInUp" data-wow-delay="100ms" style="margin-bottom:20px;">
                    <h1>HOT DEALS</h1>
                </div>
                {% elif template == 3 %}
                <div class="title pb-2">
                    <div class="pb-20">
                        <h1>HOT DEALS</h1>
                    </div>
                </div>
                {% elif template == 4 %}
                <div class="row justify-content-center mb-5">
                    <div class="col-md-12 border-primary">
                        <h1 class="font-weight-light text-primary" style="color:black !important">HOT DEALS</h1>
                    </div>
                </div>
                {% elif template == 5 %}
                <div class="menu-content">
                    <div class="title mb-3">
                        <h1>HOT DEALS</h1>
                    </div>
                </div>
                {% elif template == 6 %}
                <div class="fetured-info py-lg-3 py-3 mb-3">
                    <h3>
                        HOT DEALS
                    </h3>
                </div>
                {% elif template == 7 %}
                <div class="ten">
                    <h1 class="style_h1">HOT DEALS</h1>
                </div>
                {%endif%}

                <div id="small_banner">
                    <div class="row">
                        <div class="col-lg-3 col-sm-6">
                            <div class="stripe_small_banner">
                                <div class="div_stripe">
                                    <div class="loading_stripe"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="stripe_small_banner show_hide_mb">
                                <div class="div_stripe">
                                    <div class="loading_stripe"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="stripe_small_banner show_hide">
                                <div class="div_stripe">
                                    <div class="loading_stripe"></div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-3 col-sm-6">
                            <div class="stripe_small_banner show_hide">
                                <div class="div_stripe">
                                    <div class="loading_stripe"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

{% if dynamic_page_value == 1 %}
<section class="pt-5 pb-5" style="z-index:0; position:relative; background: #f7f7f7;">
    <div class="container">
        <div class="row">
            <div class="col-lg-12 mb-3">
                <!--add template-->
                {% if template == 1%}
                <div class="menu-content">
                    <div class="title pb-20">
                        <h1>INFORMATION</h1>
                    </div>
                </div>
                {% elif template == 2 %}
                <div class="section-heading wow fadeInUp" data-wow-delay="100ms" style="margin-bottom:20px;">
                    <h1>INFORMATION</h1>
                </div>
                {% elif template == 3 %}
                <div class="title pb-2">
                    <div class="pb-20">
                        <h1>INFORMATION</h1>
                    </div>
                </div>
                {% elif template == 4 %}
                <div class="row justify-content-center mb-5">
                    <div class="col-md-12 border-primary">
                        <h1 class="font-weight-light text-primary" style="color:black !important">HOT DEALS</h1>
                    </div>
                </div>
                {% elif template == 5 %}
                <div class="menu-content">
                    <div class="title mb-3">
                        <h1>INFORMATION</h1>
                    </div>
                </div>
                {% elif template == 6 %}
                <div class="fetured-info py-lg-3 py-3 mb-3">
                    <h3>
                        INFORMATION
                    </h3>
                </div>
                {% elif template == 7 %}
                <div class="ten">
                    <h1 class="style_h1">INFORMATION</h1>
                </div>
                {%endif%}
                <div class="row">
                    <div class="col-lg-12" id="owl-login2">
                        <div class="row">
                            <div class="col-lg-3 col-md-6">
                                <div class="stripe_dynamic_page">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="stripe_dynamic_page show_hide_mb">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="stripe_dynamic_page show_hide">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-3 col-md-6">
                                <div class="stripe_dynamic_page show_hide">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
{% endif %}

<div class="modal fade" id="myModalBills" role="dialog" data-keyboard="false">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title">{% trans 'Description' %}</h4>
                <button type="button" class="close" data-dismiss="modal">&times;</button>
            </div>
            <div class="modal-body">
                <div id="bills_response" class="row">

                </div>
                <div class="row">
                    <div class="col-lg-12">
                        <hr/>
                    </div>
                    <div class="col-lg-4"></div>
                    <div class="col-lg-4">
                        <button class="button-search primary-btn ld-ext-right btn-next" onclick="bills_ppob();" style="width:100%;" type="button" value="Next">
                            {% trans 'Next' %}
                            <div class="ld ld-ring ld-cycle"></div>
                        </button>
                    </div>
                    <div class="col-lg-4"></div>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="myModalTac" role="dialog" data-keyboard="false" data-backdrop="static">
    <div class="modal-dialog">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <h4 class="modal-title" id="terms_title">Terms</h4>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12" id="terms_body" style="height:350px; overflow:auto;">

                    </div>
                </div>
            </div>
            <div class="modal-footer" style="padding:15px 0px;">
                <div class="col-lg-12">
                    <div class="mb-3">
                        <label class="check_box_custom" id="terms_checkbox">
                            <span id="tac_text"></span>
                            <input type="checkbox" id="agree_tac" name="agree_tac"/>
                            <span class="check_box_span_custom" id="tac_span"></span>
                        </label>
                    </div>
                    <button type="button" class="primary-btn" onclick="checkCookie('tac', 'update', 'home', '');">I Agree</button>
                </div>
            </div>
        </div>
    </div>
</div>

<div class="modal fade" id="myModalPromotion" role="dialog">
    <div class="modal-dialog">
        <div class="modal-content" id="promotion">
        </div>
    </div>
</div>

{% include 'tt_website/footer.html' %}
{% include 'tt_website/plugin_live_youtube.html' %}

<script>
    get_carriers();
    {% for rec in provider_types_sequence %}
        if('{{rec.code}}' == "health_care"){
            if(document.getElementsByName('health_care_type').length > 0){ //KALAU NAME TIDAK BISA UNDEFINED HARUS DI CHECK LENGTH NYA
                document.getElementsByName('health_care_type')[0].checked = true;
                onchange_health_care();
            }
        }
    {% endfor %}
    {% if username.co_user_login != '' %}
        try{
            //hotel_signin('home');
            {% if "phc" in provider and "ticketing_phc" in username.co_agent_frontend_security %}
            get_config_medical('home','phc');
            {% endif %}
            {% if "periksain" in provider and "ticketing_periksain" in username.co_agent_frontend_security %}
            get_config_medical('home','periksain');
            {% endif %}
            {% if "medical" in provider and "ticketing_medical" in username.co_agent_frontend_security %}
            get_config_medical_global('home');
            {% endif %}
            {% if "swabexpress" in provider and "ticketing_swabexpress" in username.co_agent_frontend_security %}
            get_config_swab_express('home');
            {% endif %}
            {% if "labpintar" in provider and "ticketing_labpintar" in username.co_agent_frontend_security %}
            get_config_lab_pintar('home');
            {% endif %}
            {% if "mitrakeluarga" in provider and "ticketing_mitrakeluarga" in username.co_agent_frontend_security %}
            get_config_mitra_keluarga('home');
            {% endif %}
            {% if "sentramedika" in provider and "ticketing_sentramedika" in username.co_agent_frontend_security %}
            get_config_sentra_medika('home');
            {% endif %}
            {% if "airline" in provider and "ticketing_airline" in username.co_agent_frontend_security %}
            cookie_airline = getCookie_airline('airline_request');
            if(cookie_airline)
                cookie_airline = JSON.parse(cookie_airline);
            get_airline_config('home');
            airline_search_value = 'false';
            get_carrier_code_list();

            var airline_origin = new autoComplete({
                selector: '#origin_id_flight',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    if(term.split(' - ').length == 4)
                            term = ''
                    if(term.length > 1)
                        suggest(airline_search_autocomplete(term));
                },
                onSelect: function(e, term, item){
                    setTimeout(function(){
                        $("#destination_id_flight").focus();
                    }, 200);
                    set_airline_search_value_to_true();
                }
            });
            var airline_destination = new autoComplete({
                selector: '#destination_id_flight',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    if(term.split(' - ').length == 4)
                        term = ''
                    if(term.length > 1)
                        suggest(airline_search_autocomplete(term));
                },
                onSelect: function(e, term, item){
                    setTimeout(function(){
                        $("#airline_departure").focus();
                        $("#airline_departure_return").focus();
                    }, 200);
                    set_airline_search_value_to_true();
                }
            });
            {% endif %}
            {% if "insurance" in provider and "ticketing_insurance" in username.co_agent_frontend_security %}
            var insurance_origin = new autoComplete({
                selector: '#insurance_origin',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    if(term.split(' - ').length == 4)
                            term = ''
                    if(term.length > 1)
                        suggest(insurance_search_autocomplete(term,'origin'));
                },
                onSelect: function(e, term, item){
                    setTimeout(function(){
                        $("#insurance_destination").focus();
                    }, 200);
                    set_insurance_search_value_to_true();
                }
            });
            var insurance_destination = new autoComplete({
                selector: '#insurance_destination',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    if(term.split(' - ').length == 4)
                        term = ''
                    if(term.length > 1)
                        suggest(insurance_search_autocomplete(term,'destination'));
                },
                onSelect: function(e, term, item){
                    setTimeout(function(){
                        $('.nice-select').addClass("open");
                    }, 200);
                    set_insurance_search_value_to_true();
                }
            });
            {% endif %}
            {% if "event" in provider and "ticketing_event" in username.co_agent_frontend_security%}
            get_event_config('home');
            var event_autocomplete = new autoComplete({
                selector: '#event_name_id',
                minChars: 0,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    if(term.split(' - ').length == 2)
                        term = ''
                    if(term.length > 1)
                        suggest(event_search_autocomplete(term));
                },
                renderItem: function (item, search){
                    search = search.replace(/[-\/\\^$*+?.()|[\]{}]/g, '\\$&');
                    var re = new RegExp("(" + search.split(' ').join('|') + ")", "gi");
                    try{
                        if(item.image_url.length != 0){
                            var autocomplete_event = '<div style="padding: 10px 10px 10px 10px;" class="autocomplete-suggestion" data-langname="'+item.name+' - '+item.type+'" data-lang="'+item.name+' - '+item.type+'" data-val="'+search+'"><div style="display:inline-block;">';
                            autocomplete_event += `<img src="`+item.image_url[0]+`" style="max-width:70px;" onerror="this.src='/static/tt_website/images/no_found/no-event.png';" alt="Event"></div>`;
                            autocomplete_event += '<div style="display:inline-block; position:absolute; margin-left:10px;"><p><span style="display:block; font-size:13px;">'+item.name.replace(re, "<b>$1</b>")+ '</span>';
                            if(item.locations.length != 0){
                                autocomplete_event += '<span style="display:block; font-size:13px;"><i class="fas fa-map-marker-alt" style="padding-right:5px;"></i>';
                                for(i in item.locations){
                                    if(i > 0)
                                        autocomplete_event += '; ';

                                    if(item.locations[i].city_name != '' && item.locations[i].country_name != '')
                                        autocomplete_event += item.locations[i].city_name + ', ' + item.locations[i].country_name;
                                    else if(item.locations[i].city_name != '' && item.locations[i].country_name == '')
                                        autocomplete_event += item.locations[i].city_name;
                                    else if(item.locations[i].city_name == '' && item.locations[i].country_name != '')
                                        autocomplete_event += item.locations[i].country_name;
                                }
                                autocomplete_event += '</span></p>';
                            }
                            autocomplete_event += '</div></div>';
                            return autocomplete_event;

                        }
                        else{
                            var autocomplete_event = '<div style="padding: 10px;" class="autocomplete-suggestion" data-langname="'+item.name+' - '+item.type+'" data-lang="'+item.name+'" data-val="'+search+'"><div style="display:inline-block;">';
                            autocomplete_event += `<img src="`+item.image_url[0]+`" style="max-width:70px;" onerror="this.src='/static/tt_website/images/no_found/no-event.png';" alt="Event"></div>`;
                            autocomplete_event += '<div style="display:inline-block; position:absolute; margin-left:10px;"><p><span style="display:block; font-size:13px;">'+item.name.replace(re, "<b>$1</b>")+ '</span>';
                            if(item.locations.length != 0){
                                autocomplete_event += '<i class="fas fa-map-marker-alt"></i><span style="padding-left:5px; font-size:13px;">';
                                for(i in item.locations){
                                    if(i > 0)
                                        autocomplete_event += '; ';

                                    if(item.locations[i].city_name != '' && item.locations[i].country_name != '')
                                        autocomplete_event += item.locations[i].city_name + ', ' + item.locations[i].country_name;
                                    else if(item.locations[i].city_name != '' && item.locations[i].country_name == '')
                                        autocomplete_event += item.locations[i].city_name;
                                    else if(item.locations[i].city_name == '' && item.locations[i].country_name != '')
                                        autocomplete_event += item.locations[i].country_name;
                                }
                                autocomplete_event += '</span></p>';
                            }
                            autocomplete_event += '</div></div>';
                            return autocomplete_event;

                        }
                    }catch(err){
                        var autocomplete_event = '<div style="padding: 10px;" class="autocomplete-suggestion" data-langname="" data-lang="" data-val="'+search+'"><div style="display:inline-block;">';
                        autocomplete_event += `<img src="/static/tt_website/images/no_found/no-event.png" style="max-width:70px;" onerror="this.src='/static/tt_website/images/no_found/no-event.png';" alt="Not Found Event"></div>`;
                        autocomplete_event += '<div style="display:inline-block; position:absolute; margin-left:10px;"><p><span style="display:block; font-size:13px;">'+ search + '</span>';
                        autocomplete_event += '</div></div>';
                        return autocomplete_event;
                    }
                },
                onSelect: function(e, term, item){
                    $("#event_name_id").trigger("blur");
                    document.getElementById('event_name_id').value = $(item).attr('data-lang');
                }
            });
            {% endif %}
            {% if "visa" in provider and "ticketing_visa" in username.co_agent_frontend_security %}
            get_visa_config('home');
            {% endif %}
            {% if "passport" in provider and 'b2c_limitation' not in username.co_agent_frontend_security and "ticketing_passport" in username.co_agent_frontend_security %}
                get_passport_config('home');
            {% endif %}
            {% if "hotel" in provider and "ticketing_hotel" in username.co_agent_frontend_security%}
            var hotel_autocomplete = new autoComplete({
                selector: '#hotel_id_destination',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    get_auto_complete(term,suggest);
                },
                onSelect: function(e, term, item){
                    setTimeout(function(){
                        $('#hotel_checkin_checkout').focus();
                    }, 200);
                }
            });

            function change_date(type){
                if(type == 'checkin'){
                    change_date_hotel('checkin');
                }else{
                    change_date_hotel('checkout');
                }
            }

            function change_date_hotel(type){
                if(type == 'checkin'){
                    var date = moment(document.getElementById('hotel_checkin').value);
                    date = date.add(1, 'days');
                    if(document.getElementById('hotel_checkout').value == '' || moment(document.getElementById('hotel_checkin').value) >= moment(document.getElementById('hotel_checkout').value))
                        document.getElementById('hotel_checkout').value = date._d.toString().split(' ')[2]+' '+date._d.toString().split(' ')[1]+' '+date._d.toString().split(' ')[3];
                }else{
                    if(moment(document.getElementById('hotel_checkin').value) >= moment(document.getElementById('hotel_checkout').value)){
                    }
                }
            }
            {% endif %}
            {% if "train" in provider and "ticketing_train" in username.co_agent_frontend_security %}
            get_train_config('home');

            var train_origin = new autoComplete({
                selector: '#train_origin',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    if(term.split(' - ').length == 2)
                            term = ''
                    if(term.length > 1)
                        suggest(train_search_autocomplete(term));
                },
                onSelect: function(e, term, item){
                    setTimeout(function(){
                        $("#train_destination").focus();
                    }, 200);
                    set_train_search_value_to_true();
                }
            });
            var train_destination = new autoComplete({
                selector: '#train_destination',
                minChars: 0,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    if(term.split(' - ').length == 4)
                        term = ''
                    if(term.length > 1)
                        suggest(train_search_autocomplete(term));
                },
                onSelect: function(e, term, item){
                    setTimeout(function(){
                        $("#train_departure").focus();
                        $("#train_departure_return").focus();
                    }, 200);
                    set_train_search_value_to_true();
                }
            });
            {% endif %}

            {% if "bus" in provider and "ticketing_bus" in username.co_agent_frontend_security %}
            get_bus_config();

            var bus_origin = new autoComplete({
                selector: '#bus_origin',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    if(term.split(' - ').length == 3)
                            term = ''
                    if(term.length > 1)
                        suggest(bus_search_autocomplete(term,'origin'));
                },
                onSelect: function(e, term, item){
                    bus_origin_value = document.getElementById('bus_origin').value;
                    for(i in new_bus_destination){
                        if(new_bus_destination[i].name_show == bus_origin_value){
                            for(j in new_bus_destination[i].destination){
                                bus_destination_list[new_bus_destination[i].destination[j]] = new_bus_destination[new_bus_destination[i].destination[j]];
                            }
                            break;
                        }
                    }
                    setTimeout(function(){
                        $("#bus_destination").focus();
                    }, 200);
                    set_bus_search_value_to_true();
                }
            });
            var bus_destination = new autoComplete({
                selector: '#bus_destination',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    if(term.split(' - ').length == 3)
                        term = ''
                    if(term.length > 1)
                        suggest(bus_search_autocomplete(term,'destination'));
                },
                onSelect: function(e, term, item){
                    setTimeout(function(){
                        $("#bus_departure").focus();
                        $("#bus_departure_return").focus();
                    }, 200);
                    set_bus_search_value_to_true();
                }
            });
            {% endif %}
            {% if "activity" in provider and "ticketing_activity" in username.co_agent_frontend_security %}
            var activity_autocomplete = new autoComplete({
                selector: '#activity_query',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    activity_search_autocomplete(term,suggest);

                },
                onSelect: function(e, term, item){
                    $("#activity_query").trigger("blur");
                }
            });

            {% endif %}
            {% if "tour" in provider and "ticketing_tour" in username.co_agent_frontend_security and tour_search_template == "default_search" %}
            get_dept_year();
            var tour_autocomplete = new autoComplete({
                selector: '#tour_query',
                minChars: 1,
                cache: false,
                delay:0,
                source: function(term, suggest){
                    tour_search_autocomplete(term,suggest);

                },
                onSelect: function(e, term, item){
                    $("#tour_query").trigger("blur");
                }
            });
            {% endif %}
        }catch(err){

        }
    {% endif %}
    {% if username.co_user_login != '' %}
    //test

    //test
    //testing getbooker
    try{
        //add template
        document.getElementById("airline_date_search").innerHTML = '';
        text='';
        var node = document.createElement("div");
        if(template == 4){
            text+=`
            <span class="span-search-ticket">Departure</span>
            <div class="input-container-search-ticket">
                <i class="fas fa-calendar-alt" style="padding:14px; height: 43px; width: 45px; background:`+color+`; color:`+text_color+`;"></i>
                <input type="text" class="form-control" name="airline_departure" id="airline_departure" placeholder="Departure Date " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Departure Date '" autocomplete="off" readonly style="background:white;">
            </div>`;
        }
        else{
            text+=`
            <span class="span-search-ticket"><i class="fas fa-calendar-alt"></i> Departure</span>
            <div class="input-container-search-ticket">
                <input type="text" class="form-control" name="airline_departure" id="airline_departure" placeholder="Departure Date " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Departure Date '" autocomplete="off" readonly style="background:white;">
            </div>`;
        }

        text+=`<input type="hidden" class="form-control" name="airline_return" id="airline_return" placeholder="Return Date " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Return Date '" autocomplete="off">`;

        node.innerHTML = text;
        document.getElementById("airline_date_search").appendChild(node);
        node = document.createElement("div");
    }catch(err){

    }
    $(window).on('load', function() {
        {% if "airline" in provider and "ticketing_airline" in username.co_agent_frontend_security %}
            // check data cache airline
            if(typeof(cookie_airline) !== 'undefined' && cookie_airline != null && cookie_airline != ''){
                //cookie
                auto_fill_airline_cookie(cookie_airline);
            }
            try{
                //document.getElementsByName('radio_airline_type')[0].checked = true;
            }catch(err){
                console.log(err);
            }
        {% endif %}
        {% if "train" in provider and "ticketing_train" in username.co_agent_frontend_security %}
            try{
                //document.getElementsByName('radio_train_type')[0].checked = true;
            }catch(err){
                console.log(err);
            }
        {% endif %}
    })

    $( document ).ready(function() {
        set_active = true;
        home_page = true;

        //add template
        {% if template == 1 %}
        var class_tab = 'active';
        var class_product = 'show active';
        {% elif template == 2 or template == 3 or template == 4 or template == 5 %}
        var class_tab = 'current';
        var class_product = 'current';
        {% else %}
        var class_tab = '';
        var class_product = '';
        {% endif %}
        var product = '';
        var tab = '';

        {% if template != 6 or template != 7 %}
            {% for rec in provider_types_sequence %}
                {% if template == 1 %}
                    if('{{rec.code}}' == "health_care" || '{{rec.code}}' == "phc"){
                        tab = 'medical1-tab';
                        product = 'medical1';
                    }else if('{{rec.code}}' == "ppob"){
                        tab = 'bills-tab';
                        product = 'bills';
                    }else{
                        tab = '{{rec.code}}-tab';
                        product = '{{rec.code}}';
                    }
                {% else %}
                    if('{{rec.code}}' == "health_care"){
                        tab = 'nav_scroll_menu_medical1';
                        product = 'tab-medical1';
                    }else if('{{rec.code}}' == "ppob"){
                        tab = 'nav_scroll_menu_bills';
                        product = 'tab-bills';
                    }else{
                        tab = 'nav_scroll_menu_{{rec.code}}';
                        product = 'tab-{{rec.code}}';
                    }
                {% endif %}

                {% if "airline" in provider and "ticketing_airline" in username.co_agent_frontend_security and rec.code == "airline" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "hotel" in provider and "ticketing_hotel" in username.co_agent_frontend_security and rec.code == "hotel" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "train" in provider and "ticketing_train" in username.co_agent_frontend_security and rec.code == "train" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "ppob" in provider and "ticketing_ppob" in username.co_agent_frontend_security and rec.code == "ppob" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "tour" in provider and "ticketing_tour" in username.co_agent_frontend_security and rec.code == "tour" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "event" in provider and "ticketing_event" in username.co_agent_frontend_security and rec.code == "event" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "activity" in provider and "ticketing_activity" in username.co_agent_frontend_security and rec.code == "activity" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "visa" in provider and 'b2c_limitation' not in username.co_agent_frontend_security and "ticketing_visa" in username.co_agent_frontend_security and rec.code == "visa" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "passport" in provider and 'b2c_limitation' not in username.co_agent_frontend_security and "ticketing_passport" in username.co_agent_frontend_security and rec.code == "passport" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "bus" in provider and "ticketing_bus" in username.co_agent_frontend_security and rec.code == "bus" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif "insurance" in provider and "ticketing_insurance" in username.co_agent_frontend_security and rec.code == "insurance" %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% elif rec.code == "health_care" and "mitrakeluarga" in provider and "ticketing_mitrakeluarga" in username.co_agent_frontend_security or rec.code == "health_care" and "periksain" in provider and "ticketing_periksain" in username.co_agent_frontend_security or rec.code == "health_care" and "medical" in provider and "ticketing_medical" in username.co_agent_frontend_security or rec.code == "health_care" and "labpintar" in provider and "ticketing_labpintar" in username.co_agent_frontend_security or rec.code == "health_care" and "swabexpress" in provider and "ticketing_swabexpress" in username.co_agent_frontend_security or rec.code == "health_care" and "phc" in provider and "ticketing_phc" in username.co_agent_frontend_security or rec.code == "health_care" and "sentramedika" in provider and "ticketing_sentramedika" in username.co_agent_frontend_security %}
                    if(set_active == true){
                        $('#'+tab).addClass(class_tab);
                        $('#'+product).addClass(class_product);
                        set_active = false;
                    }
                {% endif %}
            {% endfor %}
        {% endif %}

        {% if "insurance" in provider and "ticketing_insurance" in username.co_agent_frontend_security %}
            insurance_get_config_provider('home');
        {% endif %}

        $('.js-example-basic-single').select2();
        {% if "hotel" in provider and "ticketing_hotel" in username.co_agent_frontend_security %}
        $("#hotel_checkin").val(moment().subtract(-1, 'days').format('DD MMM YYYY'));
        $("#hotel_checkout").val(moment().subtract(-2, 'days').format('DD MMM YYYY'));
        $("#hotel_checkin_wizard").val(moment().subtract(-1, 'days').format('DD MMM YYYY'));
        $("#hotel_checkout_wizard").val(moment().subtract(-2, 'days').format('DD MMM YYYY'));
        {% endif %}

        {% if big_banner_value == 1 %}
        get_banner('big_banner','home');
        {% endif %}
        {% if small_banner_value == 1 %}
        get_banner('small_banner','home');
        {% endif %}
        {% if dynamic_page_value == 1 %}
        get_dynamic_page('home');
        {% endif %}

        {% if terms_value == 1 and promotion_banner_value == 1%}
        get_term_and_condition('home');
        {% else %}
        get_banner('promotion','home');
        {% endif %}

        var now = moment().format('DD MMM YYYY');
        {% if "medical" in provider and "ticketing_medical" in username.co_agent_frontend_security %}
        try{
            {% if cache.medical.date %}
                medical_date = '{{cache.medical.date}}';
            {% else %}
                medical_date = now;
            {% endif %}
        }catch(err){
            medical_date = now;
        }
        $('input[name="medical_date"]').daterangepicker({
            singleDatePicker: true,
            autoUpdateInput: true,
            startDate: medical_date,
            minDate: moment(),
            maxDate: moment().subtract(-13, 'days'),
            showDropdowns: true,
            opens: 'center',
            locale: {
                format: 'DD MMM YYYY',
            }
        });

        $('input[name="medical_date"]').on('apply.daterangepicker', function(ev, picker) {
            setTimeout(function(){
                $("#show_total_pax_medical").click();
            }, 200);
        });

        {% endif %}

        {% if "insurance" in provider and "ticketing_insurance" in username.co_agent_frontend_security%}
        selected_value_start = $("input[name='radio_insurance_type']:checked").val();
        if (selected_value_start == "Single Trip"){
            $('input[name="insurance_date"]').daterangepicker({
                singleDatePicker: false,
                autoUpdateInput: true,
                startDate: moment(),
                autoApply: true,
                endDate: moment().subtract(-2, 'days'),
                minDate: moment().subtract(-1, 'days'),
                maxDate: moment().subtract(-1, 'years'),
                showDropdowns: true,
                opens: 'center',
                locale: {
                    format: 'DD MMM YYYY',
                }
            });

            $('input[name="insurance_date"]').on('apply.daterangepicker', function(ev, picker) {
                setTimeout(function(){
                    $("#show_total_pax_insurance").click();
                }, 200);
            });

        }
        {% endif %}
        {% if "airline" in provider and "ticketing_airline" in username.co_agent_frontend_security %}
        // check data cache airline
        if(!cookie_airline){
            // default
            try{
                {% if cache.airline.origin %}
                    document.getElementById('origin_id_flight').value = '{{cache.airline.origin}}';
                    airline_origin = '{{cache.airline.origin}}';
                {% else %}
                    document.getElementById('origin_id_flight').value = '{{airline_origin}}';
                    airline_origin = '{{airline_origin}}';
                {% endif %}
            }catch(err){
                document.getElementById('origin_id_flight').value = '{{airline_origin}}';
            }

            try{
                {% if cache.airline.origin %}
                    document.getElementById('destination_id_flight').value = '{{cache.airline.destination}}';
                    airline_destination = '{{cache.airline.destination}}';
                {% else %}
                    document.getElementById('destination_id_flight').value = '{{airline_destination}}';
                    airline_destination = '{{airline_destination}}';
                {% endif %}
            }catch(err){
                document.getElementById('destination_id_flight').value = '{{airline_destination}}';
            }

            // airline_origin = '{{airline_origin}}';
            // document.getElementById('destination_id_flight').value = '{{airline_destination}}';
            // airline_destination = '{{airline_destination}}';
            try{
                {% if cache.airline.departure %}
                    airline_date = '{{cache.airline.departure}}';
                {% else %}
                    airline_date = now;
                {% endif %}
            }catch(err){
                airline_date = now;
            }
            var picker_airline_departure = new Lightpick({
                field: document.getElementById('airline_departure'),
                singleDate: true,
                startDate: airline_date,
                minDate: moment(),
                maxDate: moment().subtract(-1, 'years'),
            });
        }
        {% endif %}

        {% if "train" in provider and "ticketing_train" in username.co_agent_frontend_security %}
        try{
            {% if cache.train.origin %}
                document.getElementById('train_origin').value = '{{cache.train.origin}}';
            {% else %}
                document.getElementById('train_origin').value = '{{train_origin}}';
            {% endif %}
        }catch(err){
            document.getElementById('train_origin').value = '{{train_origin}}';
        }
        try{
            {% if cache.train.destination %}
                document.getElementById('train_destination').value = '{{cache.train.destination}}';
            {% else %}
                document.getElementById('train_destination').value = '{{train_destination}}';
            {% endif %}
        }catch(err){
            document.getElementById('train_destination').value = '{{train_destination}}';
        }

        try{
            {% if cache.train.departure %}
                train_date = '{{cache.train.departure.0}}';
            {% else %}
                train_date = now;
            {% endif %}
        }catch(err){
            train_date = now;
        }

        {% if cache.train.direction == 'RT' %}
            document.getElementsByName('radio_train_type')[1].checked = true;
            setTimeout(() => {
                $('#radio_train_search').click();

                $("#train_departure").val(moment('{{cache.train.departure.0}}').format('DD MMM YYYY'));
                $("#train_return").val(moment('{{cache.train.departure.1}}').format('DD MMM YYYY'));
                picker_train_departure_return.setDateRange(moment('{{cache.train.departure.0}}'), moment('{{cache.train.departure.1}}'))

            }, 1000);
        {% else %}

            var picker_train_departure = new Lightpick({
                field: document.getElementById('train_departure'),
                singleDate: true,
                startDate: train_date,
                minDate: moment(),
                maxDate: moment().subtract(-2, 'months'),
                nextFocus: '#show_total_pax_train'
            });

        {% endif %}

        //$('input[name="train_departure"]').daterangepicker({
        //    singleDatePicker: true,
        //    autoUpdateInput: true,
        //    startDate: train_date,
        //    minDate: moment(),
        //    maxDate: moment().subtract(-45, 'days'),
        //    showDropdowns: true,
        //    opens: 'center',
        //    locale: {
        //        format: 'DD MMM YYYY',
        //    }
        //});

        //$('input[name="train_departure"]').on('apply.daterangepicker', function(ev, picker) {
        //    setTimeout(function(){
        //        $("#show_total_pax_train").click();
        //    }, 200);
        //});

        {% endif %}

        {% if "bus" in provider and "ticketing_bus" in username.co_agent_frontend_security %}
        try{
            {% if cache.bus.origin %}
                document.getElementById('bus_origin').value = '{{cache.bus.origin}}';
            {% else %}
                document.getElementById('bus_origin').value = '{{bus_origin}}';
            {% endif %}
        }catch(err){
            document.getElementById('bus_origin').value = '{{bus_origin}}';
        }

        try{
            {% if cache.bus.destination %}
                document.getElementById('bus_destination').value = '{{cache.bus.destination}}';
            {% else %}
                document.getElementById('bus_destination').value = '{{bus_destination}}';
            {% endif %}
        }catch(err){
            document.getElementById('bus_destination').value = '{{bus_destination}}';
        }
        try{
            {% if cache.bus.departure %}
                bus_date = '{{cache.bus.departure}}';
            {% else %}
                bus_date = now;
            {% endif %}
        }catch(err){
            bus_date = now;
        }

        var picker_bus_departure = new Lightpick({
            field: document.getElementById('bus_departure'),
            singleDate: true,
            startDate: bus_date,
            minDate: moment(),
            maxDate: moment().subtract(-3, 'months'),
            nextFocus: '#show_total_pax_bus'
        });

        //$('input[name="bus_departure"]').daterangepicker({
        //    singleDatePicker: true,
        //    autoUpdateInput: true,
        //    startDate: bus_date,
        //    minDate: moment(),
        //    maxDate: moment().subtract(-90, 'days'),
        //    showDropdowns: true,
        //    opens: 'center',
        //    locale: {
        //        format: 'DD MMM YYYY',
        //    }
        //});

        //$('input[name="bus_departure"]').on('apply.daterangepicker', function(ev, picker) {
        //    setTimeout(function(){
        //        $("#show_total_pax_bus").click();
        //    }, 200);
        //});

        {% endif %}

        {% if "hotel" in provider and "ticketing_hotel" in username.co_agent_frontend_security %}
        try{
            {% if cache.hotel.checkin %}
                hotel_checkin = '{{cache.hotel.checkin}}';
            {% else %}
                hotel_checkin = now;
            {% endif %}
        }catch(err){
            hotel_checkin = now;
        }

        try{
            {% if cache.hotel.checkout %}
                hotel_checkout = '{{cache.hotel.checkout}}';
            {% else %}
                hotel_checkout = moment().subtract(-2, 'days').format('DD MMM YYYY');
            {% endif %}
        }catch(err){
            hotel_checkout = moment().subtract(-2, 'days').format('DD MMM YYYY');
        }

        var oneDay = 24*60*60*1000;
        $("#hotel_checkin").val(hotel_checkin);
        $("#hotel_checkout").val(hotel_checkout);
        var firstDate = new Date(hotel_checkin);
        var secondDate = new Date(hotel_checkout);

        var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
        $("#total_night_search").text(diffDays);

        var picker_hotel_checkin_checkout = new Lightpick({
            field: document.getElementById('hotel_checkin_checkout'),
            singleDate: false,
            hoveringTooltip: false,
            minDays: 2,
            maxDays: 31,
            startDate: hotel_checkin,
            endDate: hotel_checkout,
            minDate: moment(),
            maxDate: moment().subtract(-366, 'days'),
            nextFocus: '#show_total_pax_hotel',
            onSelect: function(start, end){
                moment_checkIn = moment($("#hotel_checkin").val()).format('DD MMM YYYY');
                moment_checkOut = moment($("#hotel_checkout").val()).format('DD MMM YYYY');
                moment_start = moment(start).format('DD MMM YYYY');
                moment_end = moment(end).format('DD MMM YYYY');
                if(moment_checkIn != moment_start && moment_checkOut != moment_end){
                    $("#hotel_checkin").val(start.format('DD MMM YYYY'));
                    $("#hotel_checkout").val(end.format('DD MMM YYYY'));
                }else{
                    if(moment_checkIn == moment_start){
                        $("#hotel_checkin").val(moment_checkIn);
                    }
                    if(moment_checkOut != moment_end){
                        $("#hotel_checkin").val(start.format('DD MMM YYYY'));
                        $("#hotel_checkout").val(end.format('DD MMM YYYY'));
                    }
                }
            },
            onClose: function(){
                oneDay = 24*60*60*1000;
                firstDate = new Date($("#hotel_checkin").val());
                secondDate = new Date($("#hotel_checkout").val());

                diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
                $("#total_night_search").text(diffDays);
            }
        });

        //$('input[name="hotel_checkin_checkout"]').daterangepicker({
        //    singleDatePicker: false,
        //    autoUpdateInput: true,
        //    opens: 'center',
        //    autoApply: true,
        //    startDate: hotel_checkin,
        //    endDate: hotel_checkout,
        //    minDate: moment(),
        //    maxDate: moment().subtract(-366, 'days'),
        //    showDropdowns: true,
        //    locale: {
        //        format: 'DD MMM YYYY',
        //    }
        //});

        //$('input[name="hotel_checkin_checkout"]').on('apply.daterangepicker', function(ev, picker) {
        //    $(this).val(picker.startDate.format('DD MMM YYYY') + ' - ' + picker.endDate.format('DD MMM YYYY'));
        //    $("#hotel_checkin").val(picker.startDate.format('DD MMM YYYY'));
        //    $("#hotel_checkout").val(picker.endDate.format('DD MMM YYYY'));
        //    var oneDay = 24*60*60*1000;
        //    var firstDate = new Date($("#hotel_checkin").val());
        //    var secondDate = new Date($("#hotel_checkout").val());
        //
        //    var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
        //    $("#total_night_search").text(diffDays);
        //
        //    setTimeout(function(){
        //        $("#show_total_pax_hotel").click();
        //    }, 200);
        //});

        //wizard
        var oneDayWizard = 24*60*60*1000;
        var firstDateWizard = new Date(hotel_checkin);
        var secondDateWizard = new Date(hotel_checkout);
        $("#hotel_checkin_wizard").val(firstDateWizard);
        $("#hotel_checkout_wizard").val(secondDateWizard);

        var diffDaysWizard = Math.round(Math.abs((firstDateWizard.getTime() - secondDateWizard.getTime())/(oneDayWizard)));
        $("#total_night_search_wizard").text(diffDaysWizard);

        var picker_hotel_checkin_checkout_wizard = new Lightpick({
            field: document.getElementById('hotel_checkin_checkout_wizard'),
            parentEl: '#hotel_searchForm_wizard',
            singleDate: false,
            hoveringTooltip: false,
            minDays: 2,
            maxDays: 31,
            startDate: hotel_checkin,
            endDate: hotel_checkout,
            minDate: moment(),
            maxDate: moment().subtract(-366, 'days'),
            nextFocus: '#show_total_pax_hotel_wizard',
            onSelect: function(start, end){
                moment_checkInWizard = moment($("#hotel_checkin_wizard").val()).format('DD MMM YYYY');
                moment_checkOutWizard = moment($("#hotel_checkout_wizard").val()).format('DD MMM YYYY');
                moment_startWizard = moment(start).format('DD MMM YYYY');
                moment_endWizard = moment(end).format('DD MMM YYYY');
                if(moment_checkInWizard != moment_startWizard && moment_checkOutWizard != moment_endWizard){
                    $("#hotel_checkin_wizard").val(start.format('DD MMM YYYY'));
                    $("#hotel_checkout_wizard").val(end.format('DD MMM YYYY'));
                }else{
                    if(moment_checkInWizard == moment_startWizard){
                        $("#hotel_checkin_wizard").val(moment_checkInWizard);
                    }
                    if(moment_checkOutWizard != moment_endWizard){
                        $("#hotel_checkin_wizard").val(start.format('DD MMM YYYY'));
                        $("#hotel_checkout_wizard").val(end.format('DD MMM YYYY'));
                    }
                }
            },
            onClose: function(){
                oneDayWizard = 24*60*60*1000;
                firstDateWizard = new Date($("#hotel_checkin_wizard").val());
                secondDateWizard = new Date($("#hotel_checkout_wizard").val());

                diffDaysWizard = Math.round(Math.abs((firstDateWizard.getTime() - secondDateWizard.getTime())/(oneDay)));
                $("#total_night_search_wizard").text(diffDaysWizard);
            }
        });

        //$('input[name="hotel_checkin_checkout_wizard"]').daterangepicker({
        //    singleDatePicker: false,
        //    autoUpdateInput: true,
        //    opens: 'center',
        //    autoApply: true,
        //    startDate: hotel_checkin,
        //    endDate: hotel_checkout,
        //    minDate: moment(),
        //    maxDate: moment().subtract(-366, 'days'),
        //    showDropdowns: true,
        //    locale: {
        //        format: 'DD MMM YYYY',
        //    }
        //});

        //$('input[name="hotel_checkin_checkout_wizard"]').on('apply.daterangepicker', function(ev, picker) {
        //    $(this).val(picker.startDate.format('DD MMM YYYY') + ' - ' + picker.endDate.format('DD MMM YYYY'));
        //    $("#hotel_checkin_wizard").val(picker.startDate.format('DD MMM YYYY'));
        //    $("#hotel_checkout_wizard").val(picker.endDate.format('DD MMM YYYY'))//;
        //
        //    var oneDay = 24*60*60*1000;
        //    var firstDate = new Date($("#hotel_checkin_wizard").val());
        //    var secondDate = new Date($("#hotel_checkout_wizard").val())//;
        //
        //    var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
        //    $("#total_night_search_wizard").text(diffDays);
        //
        //    setTimeout(function(){
        //        $("#show_total_pax_hotel_wizard").click();
        //    }, 200);
        //});
        //wizard
        {% endif %}

        {% if "visa" in provider and "ticketing_visa" in username.co_agent_frontend_security %}
        try{
            {% if cache.visa.date %}
                visa_date = '{{cache.visa.date}}';
            {% else %}
                visa_date = now;
            {% endif %}
        }catch(err){
            visa_date = now;
        }

        $('input[name="visa_departure"]').daterangepicker({
            singleDatePicker: true,
            autoUpdateInput: true,
            startDate: visa_date,
            minDate: moment(),
            maxDate: moment().subtract(-365, 'days'),
            showDropdowns: true,
            opens: 'center',
            locale: {
                format: 'DD MMM YYYY',
            }
        });

        $('input[name="visa_departure"]').on('apply.daterangepicker', function(ev, picker) {
            setTimeout(function(){
                $('#visa_consulate_id').select2('open');
            }, 200);
        });

        {% endif %}
        {% if "tour" in provider and "ticketing_tour" in username.co_agent_frontend_security %}
            get_tour_auto_complete('home');
            $("#tour_search_form").bind("keypress", function(e) {
                if (e.keyCode == 13) {
                    return false;
                }
            });
        {% endif %}
        {% if "activity" in provider and "ticketing_activity" in username.co_agent_frontend_security %}
            get_activity_config('home');
            $("#activity_search_form").bind("keypress", function(e) {
                if (e.keyCode == 13) {
                    return false;
                }
            });
        {% endif %}
        {% if "ppob" in provider and "ticketing_ppob" in username.co_agent_frontend_security %}
            get_carrier_providers_ppob();
            get_carriers_ppob();
            get_providers_ppob();
            $("#bill_searchForm").bind("keypress", function(e) {
                if (e.keyCode == 13) {
                    return false;
                }
            });
        {% endif %}

        $('#cabin_class_flight').on('change', function() {
            setTimeout(function(){
                $("#airline_button_search").focus();
            }, 200);
        });

        $('#hotel_id_nationality_id').on('select2:close', function (e) {
            setTimeout(function(){
                $("#business_trip_help").click();
            }, 200);
        });

        $('#hotel_id_nationality_wizard_id').on('select2:close', function (e) {
            setTimeout(function(){
                $("#business_trip_help_wizard").click();
            }, 200);
        });

        $('#visa_destination_id').on('select2:close', function (e) {
            setTimeout(function(){
                $('#visa_departure').focus();
            }, 200);
        });

        new jBox('Tooltip', {
            attach: '#business_trip_help',
            target: '#business_trip_help_show',
            theme: 'TooltipBorder',
            trigger: 'click',
            adjustTracker: true,
            closeOnClick: 'body',
            closeButton: 'box',
            animation: 'move',
            position: {
              x: 'left',
              y: 'bottom'
            },
            outside: 'y',
            pointer: 'left:20',
            offset: {
              x: 25
            },
            content: "Check this section if you are doing a hotel search for business purposes",
        });

        new jBox('Tooltip', {
            attach: '#business_trip_help_wizard',
            target: '#business_trip_help_show_wizard',
            theme: 'TooltipBorder',
            trigger: 'click',
            adjustTracker: true,
            closeOnClick: 'body',
            closeButton: 'box',
            animation: 'move',
            position: {
              x: 'left',
              y: 'bottom'
            },
            outside: 'y',
            pointer: 'left:20',
            offset: {
              x: 25
            },
            content: "Check this section if you are doing a hotel search for business purposes",
        });
    });

    function print_insurance(){
        text = '';
        text += `<input type="hidden" name="g-recaptcha-response" id='recaptcha_insurance'>`;

        if(template == 1 || template == 7){
            text+=`<div style="text-align:left; padding: 30px;" onchange="onchange_provider_insurance();">`;
        }else{
            text+=`<div style="text-align:left; padding:0px 15px 15px 0px;" onchange="onchange_provider_insurance();">`;
        }

        is_checked = false;
        is_insurance_need_to_print = false;
        if(insurance_config.hasOwnProperty('bcainsurance')){
            text+=`
            <label class="radio-img">
                <input type="radio" name="insurance_provider" value="bcainsurance" checked="checked">
                <div style="width:200px; max-width:200px; display:flex; text-align:left; font-weight: 700; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    <img src="/static/tt_website/images/logo/insurance/bca_insurance.png" alt="BCA Insurance" style="width:auto; height:45px; border-radius:7px; padding:0px; background:white;">
                    <span class="title_prd">BCA<br/>Insurance</span></span>
                </div>
            </label>`;
            is_checked = true;
            is_insurance_need_to_print = true;
        }

        if(insurance_config.hasOwnProperty('zurich')){
            text+=`
            <label class="radio-img">
                <input type="radio" name="insurance_provider" value="zurich"`;
            if(is_checked == false)
                text += `checked="checked"`;
            text+=`>
                <div style="width:200px; max-width:200px; display:flex; text-align:left; font-weight: 700; overflow: hidden; text-overflow: ellipsis; white-space: nowrap;">
                    <img src="/static/tt_website/images/logo/insurance/zurich.png" alt="Zurich" style="width:auto; height:45px; border-radius:7px; padding:0px; background:white;">
                    <span class="title_prd">Zurich<br/>(Cover Covid-19)</span></span>
                </div>
            </label>`;
            is_insurance_need_to_print = true;
        }
        text+=`
        </div>`;
        if(is_insurance_need_to_print){
            text+=`
            <form action="{% url 'tt_website:insurance_search'%}" method="POST" class="form-wrap" id="insurance_searchForm">
                {% csrf_token %}
                <div class="row" id="insurance_div">

                </div>

                <input type="hidden" id="insurance_response" name="response"/>
                <center>
                    <button class="primary-btn ld-ext-right" id="btn-search-insurance" type="button" onclick="insurance_check_search_values();" value="Submit">
                        <i class="fas fa-search" style="color:{{text_color}}; font-weight:bold; font-size:18px;"></i>
                        {% trans 'Search' %}
                        <div class="ld ld-ring ld-cycle"></div>
                    </button>
                </center>
            </form>`;
        }
        document.getElementById('insurance_provider_div').innerHTML = text;
        onchange_provider_insurance();
    }

    try{
        document.getElementById("country_id").value = 100;
        document.getElementById("start").value = moment().format('YYYY-MM-DD');
        document.getElementById("end").value = moment().subtract(-1, 'years').format('YYYY-MM-DD');
        get_public_holiday(document.getElementById("start").value, document.getElementById("end").value);
        new_get_public_holiday(document.getElementById("start").value, document.getElementById("end").value);
    }catch(err){

    }
    {%endif%}

    function onchange_health_care(){
        if(document.getElementById('medical_searchForm2'))
            document.getElementById('medical_searchForm2').style.display = 'none';
        if(document.getElementById('lab_pintar_searchForm'))
            document.getElementById('lab_pintar_searchForm').style.display = 'none';
        if(document.getElementById('swab_express_searchForm'))
            document.getElementById('swab_express_searchForm').style.display = 'none';
        if(document.getElementById('medical_global_searchForm'))
            document.getElementById('medical_global_searchForm').style.display = 'none';
        if(document.getElementById('medical_searchForm1'))
            document.getElementById('medical_searchForm1').style.display = 'none';
        if(document.getElementById('mitra_keluarga_searchForm'))
            document.getElementById('mitra_keluarga_searchForm').style.display = 'none';
        if(document.getElementById('sentra_medika_searchForm'))
            document.getElementById('sentra_medika_searchForm').style.display = 'none';
        var value = ''
        var radios = document.getElementsByName('health_care_type');
        for (var j = 0, length = radios.length; j < length; j++) {
            if (radios[j].checked) {
                value = radios[j].value;
                break;
            }
        }
        if(value == 'phc')
            document.getElementById('medical_searchForm2').style.display = 'block';
        else if(value == 'lab_pintar')
            document.getElementById('lab_pintar_searchForm').style.display = 'block';
        else if(value == 'swab_express')
            document.getElementById('swab_express_searchForm').style.display = 'block';
        else if(value == 'nathos')
            document.getElementById('medical_global_searchForm').style.display = 'block';
        else if(value == 'periksain')
            document.getElementById('medical_searchForm1').style.display = 'block';
        else if(value == 'mitra_keluarga')
            document.getElementById('mitra_keluarga_searchForm').style.display = 'block';
        else if(value == 'sentra_medika')
            document.getElementById('sentra_medika_searchForm').style.display = 'block';
    }
</script>

{% endblock %}
