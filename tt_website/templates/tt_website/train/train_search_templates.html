{% extends 'tt_website/template_website_booking.html' %}
{% load i18n %}
{% load static from staticfiles %}
{% block content %}
<script src="{{ static_path }}js/webservice_token.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/train_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_train.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_agent.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_content.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/train_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/library/daterangepicker.js?version={{javascript_version}}"></script>
<script>
    static_path_url_server = '{{static_path_url_server}}'
    filter = {
        'departure_time': 'all',
        'arrival_time': 'all',
        'cabin_class': 'all'
    };
    train_request_pick = 0;
    time_limit = {{time_limit}};
    session_time_limit();
    signature = `{{signature}}`;
    frontend_signature = `{{frontend_signature}}`;
    sorting_value = '';
    passengers = {
        'adult': {{train_request.adult}},
        'infant': {{train_request.infant}}
    }
</script>
<style>
    ul {
        list-style-type: disc;
        list-style-position: inside;
    }
    ol {
       list-style-type: decimal;
       list-style-position: inside;
    }
    ul ul, ol ul {
       list-style-type: circle;
       list-style-position: inside;
       margin-left: 15px;
    }
    ol ol, ul ol {
       list-style-type: lower-latin;
       list-style-position: inside;
       margin-left: 15px;
    }
</style>
{%if train_request.direction == 'OW'%}
<title id="title_search">{{name}} {% trans 'Train' %} - {% trans 'One Way' %} {% trans 'From' %} {{train_request.origin.0}} {% trans 'To' %} {{train_request.destination.0}}</title>
{% endif %}
{%if train_request.direction == 'RT'%}
<title id="title_search">{{name}} {% trans 'Train' %} - {% trans 'Round Trip' %} {% trans 'From' %} {{train_request.origin.0}} {% trans 'To' %} {{train_request.destination.0}}</title>
{% endif %}


<div id="overlay-search-box" onclick="off_overlay()"></div>
{% include 'tt_website/header.html' %}
{% include 'tt_website/html_include/header_product_list.html' %}
{% include 'tt_website/notification.html' %}
{% include 'tt_website/plugin_passenger.html' %}
{% include 'tt_website/logout.html' %}
{% include 'tt_website/notification_box.html' %}

<div class="modal fade" id="myModalFilter" role="dialog">
    <div class="overlay_modal_custom" data-dismiss="modal"></div>
    <div class="modal-dialog modal_custom_fixed">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <div class="row">
                    <div class="col-xs-6 pb-3">
                        <h4 class="modal-title" style="padding-bottom:5px;"><i class="fas fa-filter"></i> {% trans 'Filter' %}</h4>
                        <a style="cursor: pointer;" onclick="reset_filter();"><i style="color:`+color+`;" class="fa fa-refresh"></i> Reset</a>
                    </div>
                    <div class="col-xs-6">
                        <button type="button" class="close modal_custom_close" data-dismiss="modal">&times;</button>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12" id="filter2" style="background:white; padding:15px;">
                        <div class="place_div_left_right">
                            <span style="font-weight:bold; font-size:14px;">
                                <div class="stripe_div_medium130">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </span>
                        </div>
                        <div class="place_div_grid">
                            <label>
                                <div class="stripe_div_small40">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <hr/>
                        <div class="place_div_left_right">
                                            <span style="font-weight:bold; font-size:14px;">
                                                <div class="stripe_div_small100">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                        </div>
                        <div class="place_div_grid">
                            <label>
                                <div class="stripe_div_small40">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <hr/>
                        <div class="place_div_left_right">
                                            <span style="font-weight:bold; font-size:14px;">
                                                <div class="stripe_div_small70">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                        </div>
                        <div class="place_div_grid">
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>
<div class="modal fade" id="myModalSort" role="dialog">
    <div class="overlay_modal_custom" data-dismiss="modal"></div>
    <div class="modal-dialog modal_custom_fixed">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <div class="row">
                    <div class="col-xs-6 pb-3">
                        <h4 class="modal-title"><i class="fas fa-sort"></i> {% trans 'Sort' %}</h4>
                    </div>
                    <div class="col-xs-6">
                        <button type="button" class="close modal_custom_close" data-dismiss="modal">&times;</button>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="row">
                    <div class="col-lg-12" id="sorting-train2" style="background:white; padding:15px;">
                        <div class="place_div_grid">
                            <label>
                                <div class="stripe_div_medium160 mb-3">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_medium160 mb-3">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_medium160 mb-3">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</div>

<button class="primary-btn-ticket btn_icon_fixed my_sticky_button" style="left:51%; width:20vw; height:50px; bottom:55px; position:fixed; z-index:99;" data-toggle="modal" data-target="#myModalSort">
    <span style="color:{{text_color}}; font-size:12px;"> <i class="fas fa-sort" style="font-size:20px;"></i> <span class="span_icon_fixed">{% trans 'Sort' %}</span>  </span>
</button>
<button class="primary-btn-ticket btn_icon_fixed my_sticky_button" style="right:51%; width:20vw; height:50px; bottom:55px; position:fixed; z-index:99;" data-toggle="modal" data-target="#myModalFilter">
    <span style="color:{{text_color}}; font-size:12px;"> <i class="fas fa-filter"></i> <span class="span_icon_fixed">{% trans 'Filter' %}</span>  </span>
</button>

<section class="destinations-area my_button_sticky mt-3" style="background:transparent;">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div class="drop_inline">
                    <div class="dropdown-toggle remove-arrow-dt div-dropdown-txt btn-group" data-toggle="dropdown" style="margin-bottom:0px;">
                        <button type="button" class="primary-btn" style="line-height: 1.5; height:42px; width:200px;">
                            Quick Action
                        </button>
                        <ul class="dropdown-menu dropdown-menu-w" role="menu" style="padding:15px;">
                            <button type="button" class="primary-btn-white-short" style="margin-bottom:15px; width:100%; text-align:left;" data-toggle="modal" data-target="#myModalCopyTrain" onclick="get_checked_copy_result();">
                                <i class="fas fa-copy"></i> <span id="badge-copy-notif2">0</span> <span> copy selected</span>
                            </button>
                            <button type="button" class="primary-btn-white-short" style="margin-bottom:15px; width:100%; text-align:left;" onclick="go_to_change_search('section_change_search');">
                                <i class="fas fa-search"></i> Change Search
                            </button>
                            <button type="button" class="primary-btn-white-short" style="margin-bottom:15px; width:100%; text-align:left;" onclick="go_to_element('change_date_search', 50)">
                                <i class="fas fa-calendar-alt"></i> Change Date
                            </button>
                            <button type="button" class="primary-btn-white-short" style="width:100%; text-align:left;" id="button_chart_train2" data-toggle="modal" data-target="#myModalTicketTrain">
                                <span><i class="fas fa-shopping-cart"></i> My Order</span>
                                <span class="badge-notif2 animated bounceIn" id="badge-train-notif2">0</span>
                            </button>
                        </ul>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<section id="section_change_search" class="change-search-area-pcw" style="display:none;">
    <div class="container">
        <div class="row">
            <div class="col-lg-12">
                <div id="div-search-overlay">
                    <div style="background:{{color}}; padding: 5px 10px; box-shadow: rgb(3 18 26 / 15%) 4px -1px 10px -4px, rgb(3 18 26 / 15%) -4px -1px 10px -4px; border-top-left-radius: 5px; border-top-right-radius: 5px;">
                        <div class="row">
                            <div class="col-xs-9" style="margin:auto;">
                                <h5 style="color:{{text_color}};">{% trans 'Change Search' %}</h5>
                            </div>
                            <div class="col-xs-3" style="margin:auto; text-align:right;">
                                <i class="fas fa-times" onclick="go_to_change_search('section_change_search');" style="font-size:20px; color:{{text_color}}; cursor:pointer;"></i>
                            </div>
                        </div>
                    </div>
                    <div class="change_search_box_bg">
                        <form action="{% url 'tt_website:train_search'%}" method="POST" class="form-wrap" id="train_searchForm" onsubmit="return search_train_validation()">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-lg-12" style="text-align:left;">
                                    <div class="drop_inline">
                                        <div class="dropdown-toggle div-dropdown-txt btn-group" data-toggle="dropdown">
                                            <button type="button" class="btn-dropdown-txt">
                                                <i class="fas fa-location-arrow"></i>
                                                <span id="span_radio_train_type">
                                                    {%if train_request.direction == 'OW' %} One Way {% endif %}
                                                    {%if train_request.direction == 'RT' %} Round Trip {% endif %}
                                                </span>
                                            </button>
                                            <ul class="dropdown-menu dropdown-menu-txt" role="menu">
                                                <div id="radio_train_search" style="width:fit-content;">
                                                    <label class="radio-button-custom" style="margin-bottom:0px;">
                                                        <span style="font-size:13px;">{% trans 'One Way' %}</span>
                                                        <input type="radio" id="radio_train_ow" {% if train_request.direction == 'OW' %}checked="checked" {% endif %} name="radio_train_type" value="oneway" onclick="next_focus_element('train','route');">
                                                        <span class="checkmark-radio"></span>
                                                    </label><br/>
                                                    <label class="radio-button-custom" style="margin-bottom:0px;">
                                                        <span style="font-size:13px;">{% trans 'Round Trip' %}</span>
                                                        <input type="radio" id="radio_train_rt" {% if train_request.direction == 'RT' %}checked="checked" {% endif %} name="radio_train_type" value="roundtrip" onclick="next_focus_element('train','route');">
                                                        <span class="checkmark-radio"></span>
                                                    </label>
                                                </div>
                                            </ul>
                                        </div>
                                    </div>

                                    <div class="drop_inline">
                                        <div class="dropdown-toggle div-dropdown-txt btn-group" data-toggle="dropdown">
                                            <button type="button" class="btn-dropdown-txt" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; text-align:left; cursor:pointer;">
                                                <i class="fas fa-users"></i> <span id="show_total_pax_train">1 Passengers</span>
                                            </button>
                                            <ul class="dropdown-menu dropdown-menu-txt" role="menu">
                                                <div class="row" style="padding:10px;">
                                                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5" style="float:left !important;">
                                                        <div style="float:left;">
                                                            <label>
                                                                <span style="color:black; font-size:13px;">{% trans 'Adult' %}<br/></span>
                                                                <span style="color:gray; font-size:11px;">({% trans 'Age' %} 3+)</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7" style="float:right !important;">
                                                        <div style="float:right; display:flex; padding:5px 0px 5px 5px;">
                                                            <button type="button" class="left-minus-adult-train btn-custom-circle" id="left-minus-adult-train" data-type="minus" data-field="" disabled>
                                                                <i class="fas fa-minus"></i>
                                                            </button>
                                                            <input type="text" style="font-size:13px; padding:5px !important; border:none; background:none; font-size:13px; text-align:center; width:25px;" id="train_adult" name="train_adult" value="{{train_request.adult}}" min="1" readonly>
                                                            <button type="button" class="right-plus-adult-train btn-custom-circle" id="right-plus-adult-train" data-type="plus" data-field="">
                                                                <i class="fas fa-plus"></i>
                                                            </button>
                                                        </div>
                                                    </div>

                                                    <div class="col-lg-5 col-md-5 col-sm-5 col-xs-5" style="float:left !important;">
                                                        <div style="float:left;">
                                                            <label>
                                                                <span style="color:black; font-size:13px;">{% trans 'Infant' %}<br/></span>
                                                                <span style="color:gray; font-size:11px;">({% trans 'Age' %} < 3)</span>
                                                            </label>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-7 col-md-7 col-sm-7 col-xs-7" style="float:right !important;">
                                                        <div style="float:right; display:flex; padding:5px 0px 5px 5px;">
                                                            <button type="button" class="left-minus-infant-train btn-custom-circle" id="left-minus-infant-train" data-type="minus" data-field="" disabled>
                                                                <i class="fas fa-minus"></i>
                                                            </button>
                                                            <input type="text" style="font-size:13px; padding:5px !important; border:none; background:none; font-size:13px; text-align:center; width:25px;" id="train_infant" name="train_infant" value="{{train_request.infant}}" readonly>
                                                            <button type="button" class="right-plus-infant-train btn-custom-circle" id="right-plus-infant-train" data-type="plus" data-field="">
                                                                <i class="fas fa-plus"></i>
                                                            </button>
                                                        </div>
                                                    </div>
                                                    <div class="col-lg-12" style="text-align:right;">
                                                        <hr/>
                                                        <button class="primary-btn" type="button" style="line-height:34px;" onclick="next_focus_element('train','passenger');">Done</button>
                                                    </div>
                                                </div>
                                            </ul>
                                        </div>
                                    </div>

                                </div>

                                <div class="col-lg-8">
                                    <div class="row">
                                        <div class="col-lg-6 col-md-6 train-from">
                                            <span class="span-search-ticket"><i class="fas fa-train"></i> {% trans 'From' %}</span>
                                            <div class="input-container-search-ticket">
                                                <input id="train_origin" name="train_origin" class="form-control" type="text" placeholder="{% trans 'Origin' %}" style="width:100%;outline:0" autocomplete="off" value="" onfocus="document.getElementById('train_origin').select();" onclick="set_train_search_value_to_false();" value="{{train_request.origin}}">
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6 train-to" style="z-index:5;">
                                            <div class="image-change-route-vertical">
                                                <h4><a href="javascript:train_switch();" style="z-index:5;" id="train_switch"><i class="image-rounded-icon2"><i class="fas fa-exchange-alt"></i></i></a></h4>
                                            </div>
                                            <div class="image-change-route-horizontal">
                                                <h4><a class="horizontal-arrow" href="javascript:train_switch();" style="z-index:5; color:{{text_color}} !important;" id="train_switch"><i class="image-rounded-icon"><i class="fas fa-exchange-alt"></i></i></a></h4>
                                            </div>
                                            <span class="span-search-ticket"><i class="fas fa-map-marked-alt"></i> {% trans 'To' %}</span>
                                            <div class="input-container-search-ticket">
                                                <input id="train_destination" name="train_destination" class="form-control" type="text" placeholder="{% trans 'Destination' %}" style="width:100%;outline:0" autocomplete="off" value="" onfocus="document.getElementById('train_destination').select();" onclick="set_train_search_value_to_false();" value="{{train_request.destination}}">
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-4" id="train_date_search">
                                    <span class="span-search-ticket"><i class="fas fa-calendar-alt"></i> {% trans 'Departure' %}</span>
                                    <div class="input-container-search-ticket">
                                        <input type="text" class="form-control" style="background:white;" id="train_departure_return" name="train_departure_return" placeholder="{% trans 'Departure Date' %} " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Departure Date '" autocomplete="off" readonly value=""/>
                                    </div>
                                </div>
                            </div>
                            <br/>

                            <input type="hidden" id="train_response" name="response"/>

                            <button class="primary-btn ld-ext-right" id="btn-search-train" type="button" onclick="train_check_search_values();" value="Submit">
                                <i class="fas fa-search" style="color:{{text_color}}; font-weight:bold; font-size:18px;"></i>
                                {% trans 'Search' %}
                                <div class="ld ld-ring ld-cycle"></div>
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>
<section class="destinations-area search-area-pcw" style="z-index:1; background:#f7f7f7">
    <div class="container">
        <div class="row">
            <div class="col-lg-3">
                <div class="sticky_time_fs" id="sticky_time_fs_div">
                    <div class="time_user_box mb-3">
                        <span style="font-weight:600;"><i class="fas fa-stopwatch" style="font-size:17px;"></i> {% trans 'Session Time' %}
                        <span class="count_time" id="session_time" style="float:right;"> </span></span>
                        <div style="padding-top:10px;"></div>
                        <span style="font-weight:600;"><i class="fas fa-clock" style="font-size:16px;"></i> {% trans 'Elapsed Time' %}
                            <span class="count_time" id="elapse_time" style="float:right;"> </span>
                        </span>
                        {% if username.co_user_login != default_user %}
                        <div style="display:flex;">
                            <div class="row" style="padding-top:10px;">
                                <div class="col-lg-12">
                                    <span title="{{username.co_user_name}}" style="font-weight:600; cursor:pointer; color:black; overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width:150px; display:inline-block; display:-webkit-inline-block;">
                                        <i class="fas fa-user" style="font-size:16px;"></i> {{username.co_user_name}}
                                    </span><br/>
                                    <div class="drop_inline">
                                        <div class="dropdown-toggle div-dropdown-txt btn-group" data-toggle="dropdown">
                                            <button type="button" class="btn-dropdown-txt" style="color:black">
                                                Balance & Credit
                                            </button>
                                            <ul class="dropdown-menu dropdown-menu-txt" role="menu" style="padding:15px;">
                                                <span style="float:right; font-size:20px; cursor:pointer;"><i class="fas fa-times" onclick='$(".dropdown-menu").removeClass("show");'></i></span><br/>
                                                <div id="balance_search"></div>
                                                <div id="credit_search"></div>
                                            </ul>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        {% endif %}
                        <button class="primary-btn-white-short" id="sort_pc_vr" style="width:100%; height:38px; display:none; text-align:left;" data-toggle="modal" data-target="#myModalSort">
                            <i class="fas fa-sort"></i>
                            {% trans 'Sort' %}
                        </button>
                        <button class="primary-btn-white-short" id="filter_pc_vr" style="width:100%; height:38px; display:none; text-align:left;" data-toggle="modal" data-target="#myModalFilter">
                            <i class="fas fa-filter"></i>
                            {% trans 'Filter' %}
                        </button>
                    </div>
                </div>

                <div class="sorting-search-train mb-3" id="sorting-search-train">
                    <div id="sorting-train">
                        <div class="sorting-box">
                            <span style="font-weight: bold; margin-right:10px;">Sort by: </span>
                            <div class="stripe_sorting">
                                <div class="div_stripe">
                                    <div class="loading_stripe"></div>
                                </div>
                            </div>
                            <div class="stripe_sorting">
                                <div class="div_stripe">
                                    <div class="loading_stripe"></div>
                                </div>
                            </div>
                            <div class="stripe_sorting">
                                <div class="div_stripe">
                                    <div class="loading_stripe"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="filter-search-train" id="filter-search-train" style="z-index:1;">
                    <div class="filter_box" id="filter">
                        <div class="place_div_left_right">
                            <span style="font-weight:bold; font-size:14px;">
                                <div class="stripe_div_small70">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </span>
                            <label style="position:absolute; right:0px;">
                                <div class="stripe_div_small70">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <hr/>
                        <div class="place_div_left_right">
                            <span style="font-weight:bold; font-size:14px;">
                                <div class="stripe_div_medium130">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </span>
                            <label style="position:absolute; right:0px;">
                                <div class="stripe_checkbox">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <div class="place_div_grid">
                            <label>
                                <div class="stripe_div_small40">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <hr/>
                        <div class="place_div_left_right">
                            <span style="font-weight:bold; font-size:14px;">
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </span>
                            <label style="position:absolute; right:0px;">
                                <div class="stripe_checkbox">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <div class="place_div_grid">
                            <label>
                                <div class="stripe_div_small40">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <hr/>
                        <div class="place_div_left_right">
                            <span style="font-weight:bold; font-size:14px;">
                                <div class="stripe_div_small70">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </span>
                            <label style="position:absolute; right:0px;">
                                <div class="stripe_checkbox">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                        <div class="place_div_grid">
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                            <label>
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-9">
                <div class="change_search_div" id="train_search_params">
                    <div class="destinations-area change_search_n">
                        <div class="row">
                            <div class="col-lg-8 col-md-7 mb-1">
                                <div class="row">
                                    <div class="col-lg-12">
                                        <div style="white-space: nowrap; overflow: hidden; text-overflow: ellipsis;">
                                            <span style="font-weight:bold; text-transform: capitalize; border-right:2px solid #cdcdcd; padding-right:2px;"><span class="copy_span">{% if train_request.direction == 'OW' %}{% trans 'One Way' %}{% elif train_request.direction == 'RT' %}{% trans 'Round Trip' %}{% endif %} </span></span>
                                            <!--<span style="text-transform: capitalize; font-weight:bold; padding-left:5px;" title="{{train_request.origin}} > {{train_request.destination}}"><span class="copy_span">{{train_request.origin.0}}</span> {% if train_request.direction == 'OW' %} <i class="fas fa-arrow-right"></i> {% elif train_request.direction == 'RT' %} <i class="fas fa-arrows-alt-h"></i> {%endif%}<span class="copy_span">{{train_request.destination.0}}</span></span>-->
                                            <span style="text-transform: capitalize; font-weight:bold; padding-left:5px;" id="show_origin_destination"></span>
                                        </div>
                                    </div>
                                    <div class="col-lg-12" style="overflow: hidden; text-overflow: ellipsis; white-space: nowrap; max-width:100%; display:inline-block; display:-webkit-inline-block;">
                                        <span class="copy_span" style="text-transform: capitalize;" id="show_date"></span>
                                        <span class="copy_span" style="text-transform: capitalize; padding-left:10px;"><i class="fas fa-users"></i> {% if train_request.adult != 0 %} {{train_request.adult}} {% trans 'Adult' %} {% endif %}{% if train_request.infant != 0 %}, {{train_request.infant}} {% trans 'Infant' %} {% endif %} </span>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-4 col-md-5 txt-right-left">
                                <button class="primary-btn-custom" type="button" onclick="go_to_change_search('section_change_search');">
                                    <span id="change_search_text"><i class="fas fa-search" style="font-size:18px;"></i></span>
                                </button>
                                <button class="primary-btn-custom" id="button_copy_train" style="text-align:left; margin-bottom:0px;" data-toggle="modal" data-target="#myModalCopyTrain" onclick="get_checked_copy_result();">
                                    <i class="fas fa-copy" style="font-size:18px;"></i>
                                    <span id="badge-copy-notif">0</span>
                                </button>
                                <button class="primary-btn-custom" id="button_chart_train" data-toggle="modal" data-target="#myModalTicketTrain">
                                    <span style="color:{{text_color}}; font-size:13px;"><i class="fas fa-shopping-cart" style="font-size:18px;"></i></span>
                                    <span class="badge-notif2" id="badge-train-notif">0</span>
                                </button>
                            </div>
                        </div>

                        <div id="change_date_search" style="padding-top:10px;padding-bottom:5px;">
                            <div class="stripe_change_date">
                                <div class="div_stripe">
                                    <div class="loading_stripe"></div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div id="change_search_box" style="display:none; z-index:98; position:relative; box-shadow: rgb(3 18 26 / 15%) 4px -1px 10px -4px, rgb(3 18 26 / 15%) -4px -1px 10px -4px;">
                    <div class="overlay overlay-bg"></div>
                </div>

                <div class="row">
                    <div class="col-lg-12" id="train_result">
                        <div class="place_div_white">
                            <span style="font-weight:bold; font-size:14px;">
                                <div class="stripe_div_medium130">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </span>
                            <label style="position:absolute; right:10px;">
                                <div class="stripe_div_small100">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </label>
                        </div>
                    </div>
                </div>

                <div class="row" id="loading-search-train">
                    <!--                    <div class="col-lg-12">-->
                    <!--                        <div class="sk-circle">-->
                    <!--                            <div class="sk-circle1 sk-child"></div>-->
                    <!--                            <div class="sk-circle2 sk-child"></div>-->
                    <!--                            <div class="sk-circle3 sk-child"></div>-->
                    <!--                            <div class="sk-circle4 sk-child"></div>-->
                    <!--                            <div class="sk-circle5 sk-child"></div>-->
                    <!--                            <div class="sk-circle6 sk-child"></div>-->
                    <!--                            <div class="sk-circle7 sk-child"></div>-->
                    <!--                            <div class="sk-circle8 sk-child"></div>-->
                    <!--                            <div class="sk-circle9 sk-child"></div>-->
                    <!--                            <div class="sk-circle10 sk-child"></div>-->
                    <!--                            <div class="sk-circle11 sk-child"></div>-->
                    <!--                            <div class="sk-circle12 sk-child"></div>-->
                    <!--                        </div>-->
                    <!--                        <div style="text-align:center"><h6 class="mb-3">{% trans 'PLEASE WAIT' %}</h6></div>-->
                    <!--                    </div>-->
                </div>

                <div id="train_pick_ticket" style="margin-top:15px; margin-bottom:15px;">

                </div>

                <div class="div_box_default mb-3" id="train_div_box_choose">

                </div>

                <div id="train_ticket_loading">
                    <div class="div_box_default mb-3">
                        <div class="row">
                            <div class="col-xs-10">
                                <div class="stripe_div_small70">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-2" style="padding:0px 15px 15px 15px;">
                                <label style="position:absolute; right:15px;">
                                    <div class="stripe_checkbox">
                                        <div class="div_stripe">
                                            <div class="loading_stripe"></div>
                                        </div>
                                    </div>
                                </label>
                            </div>

                            <div class="col-lg-3" style="margin-top:10px;">
                                <span>
                                    <div class="stripe_2row_small">
                                        <div class="div_stripe">
                                            <div class="loading_stripe"></div>
                                        </div>
                                    </div>
                                </span>
                                <div class="stripe_div_small100" style="margin-top:5px;">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-8" style="margin-bottom:15px;">
                                <div class="row">
                                    <div class="col-xs-6">
                                        <table style="width:100%">
                                            <tbody>
                                            <tr>
                                                <td style="padding-bottom:20px;">
                                                    <h5>
                                                        <div class="stripe_div_small70">
                                                            <div class="div_stripe">
                                                                <div class="loading_stripe"></div>
                                                            </div>
                                                        </div>
                                                    </h5>
                                                </td>
                                                <td style="padding-left:15px;">
                                                    <img src="/static/tt_website/images/icon/symbol/train-01.png" alt="Train" style="width:20px; height:20px; margin-top:5px;">
                                                </td>
                                                <td style="height:30px;padding:0 15px;width:100%">
                                                    <div style="display:inline-block;position:relative;width:100%">
                                                        <div style="height:2px;position:absolute;top:16px;width:100%;background-color:#d4d4d4;"></div>
                                                        <div class="origin-code-snippet" style="background-color:#d4d4d4;right:-6px"></div>
                                                        <div style="height:30px;min-width:40px;position:relative;width:0%">
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <span>
                                                    <div class="stripe_span">
                                                        <div class="div_stripe">
                                                            <div class="loading_stripe"></div>
                                                        </div>
                                                    </div>
                                                </span>
                                        <span>
                                                    <div class="stripe_span">
                                                        <div class="div_stripe">
                                                            <div class="loading_stripe"></div>
                                                        </div>
                                                    </div>
                                                </span><br>
                                    </div>
                                    <div class="col-xs-6">
                                        <table style="width:100%; margin-bottom:5px;">
                                            <tbody>
                                            <tr>
                                                <td style="padding-bottom:15px;">
                                                    <h5>
                                                        <div class="stripe_div_small70">
                                                            <div class="div_stripe">
                                                                <div class="loading_stripe"></div>
                                                            </div>
                                                        </div>
                                                    </h5>
                                                </td>
                                                <td></td>
                                                <td style="height:30px;padding:0 15px;width:100%"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <span>
                                                <div class="stripe_span">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                        <span>
                                    <div class="stripe_span">
                                            <div class="div_stripe">
                                                <div class="loading_stripe"></div>
                                            </div>
                                        </div>
                                        </span><br>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-3 col-md-4">
                                <div class="row">
                                    <div class="col-xs-12">
                                        <span>
                                            <div class="stripe_span">
                                                <div class="div_stripe">
                                                    <div class="loading_stripe"></div>
                                                </div>
                                            </div>
                                        </span>
                                    </div>
                                    <div class="col-xs-12">
                                        <span>
                                            <div class="stripe_span">
                                                <div class="div_stripe">
                                                    <div class="loading_stripe"></div>
                                                </div>
                                            </div>
                                        </span>
                                    </div>
                                    <div class="col-xs-12" style="margin-top:15px;">
                                        <span style="float:right;">
                                            <div class="stripe_div_small100">
                                                <div class="div_stripe">
                                                    <div class="loading_stripe"></div>
                                                </div>
                                            </div>
                                        </span>
                                    </div>
                                    <div class="col-xs-12" style="margin-top:10px;">
                                        <span style="float:right;">
                                            <div class="stripe_button">
                                                <div class="div_stripe">
                                                    <div class="loading_stripe"></div>
                                                </div>
                                            </div>
                                        </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="div_box_default mb-3">
                        <div class="row">
                            <div class="col-xs-10">
                                <div class="stripe_div_small70">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-2" style="padding:0px 15px 15px 15px;">
                                <label style="position:absolute; right:15px;">
                                    <div class="stripe_checkbox">
                                        <div class="div_stripe">
                                            <div class="loading_stripe"></div>
                                        </div>
                                    </div>
                                </label>
                            </div>

                            <div class="col-lg-3" style="margin-top:10px;">
                                    <span>
                                        <div class="stripe_2row_small">
                                            <div class="div_stripe">
                                                <div class="loading_stripe"></div>
                                            </div>
                                        </div>
                                    </span>
                                <div class="stripe_div_small100" style="margin-top:5px;">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-8" style="margin-bottom:15px;">
                                <div class="row">
                                    <div class="col-xs-6">
                                        <table style="width:100%">
                                            <tbody>
                                            <tr>
                                                <td style="padding-bottom:20px;">
                                                    <h5>
                                                        <div class="stripe_div_small70">
                                                            <div class="div_stripe">
                                                                <div class="loading_stripe"></div>
                                                            </div>
                                                        </div>
                                                    </h5>
                                                </td>
                                                <td style="padding-left:15px;">
                                                    <img src="/static/tt_website/images/icon/symbol/train-01.png" alt="Train" style="width:20px; height:20px; margin-top:5px;">
                                                </td>
                                                <td style="height:30px;padding:0 15px;width:100%">
                                                    <div style="display:inline-block;position:relative;width:100%">
                                                        <div style="height:2px;position:absolute;top:16px;width:100%;background-color:#d4d4d4;"></div>
                                                        <div class="origin-code-snippet" style="background-color:#d4d4d4;right:-6px"></div>
                                                        <div style="height:30px;min-width:40px;position:relative;width:0%">
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <span>
                                                    <div class="stripe_span">
                                                        <div class="div_stripe">
                                                            <div class="loading_stripe"></div>
                                                        </div>
                                                    </div>
                                                </span>
                                        <span>
                                                    <div class="stripe_span">
                                                        <div class="div_stripe">
                                                            <div class="loading_stripe"></div>
                                                        </div>
                                                    </div>
                                                </span><br>
                                    </div>
                                    <div class="col-xs-6">
                                        <table style="width:100%; margin-bottom:5px;">
                                            <tbody>
                                            <tr>
                                                <td style="padding-bottom:15px;">
                                                    <h5>
                                                        <div class="stripe_div_small70">
                                                            <div class="div_stripe">
                                                                <div class="loading_stripe"></div>
                                                            </div>
                                                        </div>
                                                    </h5>
                                                </td>
                                                <td></td>
                                                <td style="height:30px;padding:0 15px;width:100%"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <span>
                                                <div class="stripe_span">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                        <span>
                                                <div class="stripe_span">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span><br>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-3 col-md-4">
                                <div class="row">
                                    <div class="col-xs-12">
                                            <span>
                                                <div class="stripe_span">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                    </div>
                                    <div class="col-xs-12">
                                            <span>
                                                <div class="stripe_span">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                    </div>
                                    <div class="col-xs-12" style="margin-top:15px;">
                                            <span style="float:right;">
                                                <div class="stripe_div_small100">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                    </div>
                                    <div class="col-xs-12" style="margin-top:10px;">
                                            <span style="float:right;">
                                                <div class="stripe_button">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div class="div_box_default mb-3">
                        <div class="row">
                            <div class="col-xs-10">
                                <div class="stripe_div_small70">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-xs-2" style="padding:0px 15px 15px 15px;">
                                <label style="position:absolute; right:15px;">
                                    <div class="stripe_checkbox">
                                        <div class="div_stripe">
                                            <div class="loading_stripe"></div>
                                        </div>
                                    </div>
                                </label>
                            </div>

                            <div class="col-lg-3" style="margin-top:10px;">
                                    <span>
                                        <div class="stripe_2row_small">
                                            <div class="div_stripe">
                                                <div class="loading_stripe"></div>
                                            </div>
                                        </div>
                                    </span>
                                <div class="stripe_div_small100" style="margin-top:5px;">
                                    <div class="div_stripe">
                                        <div class="loading_stripe"></div>
                                    </div>
                                </div>
                            </div>
                            <div class="col-lg-6 col-md-8" style="margin-bottom:15px;">
                                <div class="row">
                                    <div class="col-xs-6">
                                        <table style="width:100%">
                                            <tbody>
                                            <tr>
                                                <td style="padding-bottom:20px;">
                                                    <h5>
                                                        <div class="stripe_div_small70">
                                                            <div class="div_stripe">
                                                                <div class="loading_stripe"></div>
                                                            </div>
                                                        </div>
                                                    </h5>
                                                </td>
                                                <td style="padding-left:15px;">
                                                    <img src="/static/tt_website/images/icon/symbol/train-01.png" alt="Train" style="width:20px; height:20px; margin-top:5px;">
                                                </td>
                                                <td style="height:30px;padding:0 15px;width:100%">
                                                    <div style="display:inline-block;position:relative;width:100%">
                                                        <div style="height:2px;position:absolute;top:16px;width:100%;background-color:#d4d4d4;"></div>
                                                        <div class="origin-code-snippet" style="background-color:#d4d4d4;right:-6px"></div>
                                                        <div style="height:30px;min-width:40px;position:relative;width:0%">
                                                        </div>
                                                    </div>
                                                </td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <span>
                                                    <div class="stripe_span">
                                                        <div class="div_stripe">
                                                            <div class="loading_stripe"></div>
                                                        </div>
                                                    </div>
                                                </span>
                                        <span>
                                                    <div class="stripe_span">
                                                        <div class="div_stripe">
                                                            <div class="loading_stripe"></div>
                                                        </div>
                                                    </div>
                                                </span><br>
                                    </div>
                                    <div class="col-xs-6">
                                        <table style="width:100%; margin-bottom:5px;">
                                            <tbody>
                                            <tr>
                                                <td style="padding-bottom:15px;">
                                                    <h5>
                                                        <div class="stripe_div_small70">
                                                            <div class="div_stripe">
                                                                <div class="loading_stripe"></div>
                                                            </div>
                                                        </div>
                                                    </h5>
                                                </td>
                                                <td></td>
                                                <td style="height:30px;padding:0 15px;width:100%"></td>
                                            </tr>
                                            </tbody>
                                        </table>
                                        <span>
                                                <div class="stripe_span">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                        <span>
                                                <div class="stripe_span">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span><br>
                                    </div>
                                </div>
                            </div>

                            <div class="col-lg-3 col-md-4">
                                <div class="row">
                                    <div class="col-xs-12">
                                            <span>
                                                <div class="stripe_span">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                    </div>
                                    <div class="col-xs-12">
                                            <span>
                                                <div class="stripe_span">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                    </div>
                                    <div class="col-xs-12" style="margin-top:15px;">
                                            <span style="float:right;">
                                                <div class="stripe_div_small100">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                    </div>
                                    <div class="col-xs-12" style="margin-top:10px;">
                                            <span style="float:right;">
                                                <div class="stripe_button">
                                                    <div class="div_stripe">
                                                        <div class="loading_stripe"></div>
                                                    </div>
                                                </div>
                                            </span>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <div id="train_ticket">

                </div>
            </div>
        </div>
    </div>
</section>

<div class="modal fade" id="myModalTicketTrain" role="dialog">
    <div class="overlay_modal_custom" data-dismiss="modal"></div>
    <div class="modal-dialog modal_custom_fixed">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <div class="row">
                    <div class="col-xs-6 pb-3">
                        <h4 class="modal-title"><i class="fas fa-shopping-cart"></i></i> My Order</h4>
                    </div>
                    <div class="col-xs-6">
                        <button type="button" class="close modal_custom_close" data-dismiss="modal">&times;</button>
                    </div>
                </div>
            </div>
            <form action="" method="POST" id="train_passenger" style="display:contents">
                {% csrf_token %}
                <div class="modal-body">
                    <div class="row" id="choose-ticket-train">
                        <div class="col-lg-12">
                            <h6>{% trans 'Please choose your ticket first!' %}</h6>
                        </div>
                    </div>
                    <div class="row" id="loading-search-train-choose" style="display:none;">
                        <div class="col-lg-12">
                            <div class="sk-circle">
                                <div class="sk-circle1 sk-child"></div>
                                <div class="sk-circle2 sk-child"></div>
                                <div class="sk-circle3 sk-child"></div>
                                <div class="sk-circle4 sk-child"></div>
                                <div class="sk-circle5 sk-child"></div>
                                <div class="sk-circle6 sk-child"></div>
                                <div class="sk-circle7 sk-child"></div>
                                <div class="sk-circle8 sk-child"></div>
                                <div class="sk-circle9 sk-child"></div>
                                <div class="sk-circle10 sk-child"></div>
                                <div class="sk-circle11 sk-child"></div>
                                <div class="sk-circle12 sk-child"></div>
                            </div>
                            <div style="text-align:center"><h6 class="mb-3">{% trans 'PLEASE WAIT' %}</h6></div>
                        </div>
                    </div>

                    <div id="train_detail">

                    </div>
                </div>
                <div class="modal-footer">
                    <div class="col-lg-12" style="padding:0px;" id="train_footer_detail">

                    </div>
                </div>
            </form>
        </div>
    </div>
</div>

{% include 'tt_website/footer.html' %}

<div class="modal fade" id="myModalCopyTrain" role="dialog">
    <div class="overlay_modal_custom" data-dismiss="modal"></div>
    <div class="modal-dialog modal_custom_fixed">
        <!-- Modal content-->
        <div class="modal-content">
            <div class="modal-header">
                <div class="row">
                    <div class="col-xs-6 pb-3">
                        <h4 class="modal-title"><i class="fas fa-copy"></i> {% trans 'List Copy Train' %}</h4>
                    </div>
                    <div class="col-xs-6">
                        <button type="button" class="close modal_custom_close" data-dismiss="modal">&times;</button>
                    </div>
                </div>
            </div>
            <div class="modal-body">
                <div class="row" id="choose-train-copy">
                    <div class="col-lg-12">
                        <h6>{% trans 'Please choose your trains want to copy!' %}</h6>
                    </div>
                </div>
                <div id="show-list-copy-train">

                </div>
                <textarea id="data_copy" name="data_copy" rows="4" hidden></textarea>
            </div>
            <div class="modal-footer" style="display:unset;">
                <div class="row" id="footer_list_copy">

                </div>
            </div>
        </div>
    </div>
</div>

<!--<script>-->
<!--    document.getElementById('button_copy_train').style.bottom = JSON.parse(JSON.stringify(bottom.toString())) + 'px';-->
<!--    bottom+=60;-->
<!--</script>-->
<script>
    document.getElementById('train_origin').value = '{{train_request.origin.0}}';
    document.getElementById('train_destination').value = '{{train_request.destination.0}}';
    departure_date = '';
    {% for departure in train_request.departure %}
        if(departure_date != '')
            departure_date += ' - '
        departure_date += '{{departure}}';
    {% endfor %}

    $(document).ready(function () {

        //new jBox('Tooltip', {
        //   attach: '#button_copy_train',
        //    theme: 'TooltipBorder',
        //   width: 200,
        //    position: {
        //      x: 'left',
        //      y: 'center'
        //   },
        //    outside: 'x',
        //    pointer: 'top:15',
        //    content: 'Fitur<br/><b>List Copy</b>',
        //    animation: 'move'
        //});

        //new jBox('Tooltip', {
        //    attach: '#button_chart_train',
        //    theme: 'TooltipBorder',
        //    width: 200,
        //    position: {
        //      x: 'left',
        //      y: 'center'
        //    },
        //    outside: 'x',
        //    pointer: 'top:15',
        //   content: 'Train<br/><b>Chart Train</b>',
        //    animation: 'move'
        //});

        if(document.getElementById("balance_search") && document.getElementById("balance"))
            document.getElementById("balance_search").innerHTML = document.getElementById("balance").innerHTML;

        if(document.getElementById("credit_search") && document.getElementById("customer_parent_balance"))
            document.getElementById("credit_search").innerHTML = document.getElementById("customer_parent_balance").innerHTML;
        else if(document.getElementById("credit_search") && document.getElementById("credit_limit"))
            document.getElementById("credit_search").innerHTML = document.getElementById("credit_limit").innerHTML;
        $(window).scroll(function() {
            if ($(this).scrollTop() >= 66) {
                if ($(window).width() >= 992){
                   if(document.getElementById("balance_search") && document.getElementById("balance"))
                       document.getElementById("balance_search").innerHTML = document.getElementById("balance").innerHTML;

                   if(document.getElementById("credit_search") && document.getElementById("customer_parent_balance"))
                       document.getElementById("credit_search").innerHTML = document.getElementById("customer_parent_balance").innerHTML;
                   else if(document.getElementById("credit_search") && document.getElementById("credit_limit"))
                       document.getElementById("credit_search").innerHTML = document.getElementById("credit_limit").innerHTML;
                }
            }
        });
    });

    $(function() {
      var quantity_adult_train = parseInt($('#train_adult').val());
      var quantity_infant_train = parseInt($('#train_infant').val());
      if (quantity_adult_train == 4){
        document.getElementById("left-minus-adult-train").disabled = false;
        document.getElementById("right-plus-adult-train").disabled = true;
      }else if (quantity_adult_train == 1){
        document.getElementById("left-minus-adult-train").disabled = true;
        document.getElementById("right-plus-adult-train").disabled = false;
      }else{
        document.getElementById("left-minus-adult-train").disabled = false;
        document.getElementById("right-plus-adult-train").disabled = false;
      }

      if(quantity_infant_train == quantity_adult_train){
        document.getElementById("left-minus-infant-train").disabled = false;
        document.getElementById("right-plus-infant-train").disabled = true;
      }
      else if(quantity_infant_train == 0){
        document.getElementById("left-minus-infant-train").disabled = true;
        document.getElementById("right-plus-infant-train").disabled = false;
      }
      else{
        document.getElementById("right-plus-infant-train").disabled = false;
        document.getElementById("left-minus-infant-train").disabled = false;
      }


        var radioValueTrain = $("input[name='radio_train_type']:checked").val();
        if(radioValueTrain){
            $radio_value_string = radioValueTrain;
        }

        //breadcrumb_create("train", 2, 0);
        if('{{train_request.direction}}' == 'OW'){
            document.getElementById("train_date_search").innerHTML = '';
            text='';
            var node = document.createElement("div");

            text+=`
            <span class="span-search-ticket"><i class="fas fa-calendar-alt"></i> Departure</span>
            <div class="input-container-search-ticket">
                <input type="text" class="form-control" style="background:white;" name="train_departure" id="train_departure" placeholder="Departure Date " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Departure Date '" autocomplete="off" readonly>
            </div>`;

            node.innerHTML = text;
            document.getElementById("train_date_search").appendChild(node);
            node = document.createElement("div");

            var picker_train_departure = new Lightpick({
                field: document.getElementById('train_departure'),
                singleDate: true,
                startDate: departure_date,
                minDate: moment(),
                maxDate: moment().subtract(-2, 'months'),
            });

            //$('input[name="train_departure"]').daterangepicker({
            //  singleDatePicker: true,
            //  autoUpdateInput: true,
            //  startDate: departure_date,
            //  minDate: moment(),
            //  maxDate: moment().subtract(-45, 'days'),
            //  showDropdowns: true,
            //  opens: 'center',
            //  locale: {
            //      format: 'DD MMM YYYY',
            //  }
            //});

            //$('input[name="train_departure"]').on('apply.daterangepicker', function(ev, picker) {
            //   setTimeout(function(){
            //        $("#show_total_pax_train").click();
            //    }, 200);
            //});
        }else{

            var picker_train_departure = new Lightpick({
                field: document.getElementById('train_departure_return'),
                singleDate: false,
                hoveringTooltip: false,
                startDate: departure_date.split(' - ')[0],
                endDate: departure_date.split(' - ')[1],
                minDate: moment(),
                maxDate: moment().subtract(-2, 'months'),
            });

            //$('input[name="train_departure_return"]').daterangepicker({
            //  singleDatePicker: false,
            //  autoUpdateInput: true,
            //  autoApply: true,
            //  startDate: departure_date.split(' - ')[0],
            //  endDate: departure_date.split(' - ')[1],
            //  minDate: moment(),
            //  maxDate: moment().subtract(-45, 'days'),
            //  showDropdowns: true,
            //  opens: 'center',
            //  locale: {
            //      format: 'DD MMM YYYY',
            //  }
            //});

            //$('input[name="train_departure_return"]').on('apply.daterangepicker', function(ev, picker) {
            //    setTimeout(function(){
            //        $("#show_total_pax_train").click();
            //    }, 200);
            //});
        }
    });

    var train_origin = new autoComplete({
        selector: '#train_origin',
        minChars: 1,
        cache: false,
        delay:0,
        source: function(term, suggest){
            if(term.split(' - ').length == 2)
                    term = ''
            if(term.length > 1)
                suggest(train_search_autocomplete(term));
        },
        onSelect: function(e, term, item){
            setTimeout(function(){
                $("#train_destination").focus();
            }, 200);
            set_train_search_value_to_true();
        }
    });
    var train_destination = new autoComplete({
        selector: '#train_destination',
        minChars: 0,
        cache: false,
        delay:0,
        source: function(term, suggest){
            if(term.split(' - ').length == 4)
                term = ''
            if(term.length > 1)
                suggest(train_search_autocomplete(term));
        },
        onSelect: function(e, term, item){
            setTimeout(function(){
                $("#train_departure").focus();
                $("#train_departure_return").focus();
            }, 200);
            set_train_search_value_to_true();
        }
    });

    train_filter_render();
    get_train_data_search_page(frontend_signature);
    try{
        get_public_holiday(moment().format('YYYY-MM-DD'), moment().subtract(-1, 'years').format('YYYY-MM-DD'));
        new_get_public_holiday(moment().format('YYYY-MM-DD'), moment().subtract(-1, 'years').format('YYYY-MM-DD'));
    }catch(err){
        console.log(err);
    }
</script>

{% endblock %}
