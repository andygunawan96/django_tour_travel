{% extends 'tt_website_rodextrip/template_website_booking.html' %}
{% load i18n %}
{% load static from staticfiles %}
{% block content %}
<link rel="stylesheet" type="text/css" href="{{ static_path }}vendor/bootstrap/css/bootstrap.min.css?version={{javascript_version}}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="{{ static_path }}fonts/font-awesome-4.7.0/css/font-awesome.min.css?version={{javascript_version}}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="{{ static_path }}vendor/animate/animate.css?version={{javascript_version}}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="{{ static_path }}fonts/Linearicons-Free-v1.0.0/icon-font.min.css?version={{javascript_version}}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="{{ static_path }}vendor/css-hamburgers/hamburgers.min.css?version={{javascript_version}}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="{{ static_path }}vendor/animsition/css/animsition.min.css?version={{javascript_version}}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="{{ static_path }}vendor/select2/select2.min.css?version={{javascript_version}}">
<!--===============================================================================================-->
<link rel="stylesheet" type="text/css" href="{{ static_path }}vendor/daterangepicker/daterangepicker.css?version={{javascript_version}}">
<link rel="stylesheet" type="text/css" href="{{ static_path }}login/css/util.css?version={{javascript_version}}">
<link rel="stylesheet" type="text/css" href="{{ static_path }}login/css/main.css?version={{javascript_version}}">

<link rel="stylesheet" type="text/css" href="{{ static_path }}login/css/owl.carousel.css?version={{javascript_version}}">
<link rel="stylesheet" type="text/css" href="{{ static_path }}login/css/owl.theme.default.min.css?version={{javascript_version}}">
<link rel="stylesheet" type="text/css" href="{{ static_path }}login/css/owl.theme.green.min.css?version={{javascript_version}}">
<!--loadingbar-->
<link rel="stylesheet" href="{{ static_path }}css/loading.css?version={{javascript_version}}">
<link rel="stylesheet" href="{{ static_path }}css/loading-btn.css?version={{javascript_version}}">
<link rel="stylesheet" href="{{ static_path }}css/loading-bar.css?version={{javascript_version}}">

<script src="{{ static_path }}js/webservice_content.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/agent_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/vendor/owl.carousel.min.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/vendor/login_main.js?version={{javascript_version}}"></script>
<style>
    .testimonial-area{
        min-height:100vh;
    }
</style>
<title>{{name}} - Payment Method</title>
<script>
    order_number = `{{order_number}}`;
    order_number = order_number.split('.')[0] + '.' + order_number.split('.')[1];
</script>
{% if provider == 'espay'%}
<script type="text/javascript" src="{{espay_script}}"></script>
<script type="text/javascript">
window.onload = function () {
var data = {
    paymentId: '{{order_number}}',
    key: '{{espay_api_key}}',
    backUrl: encodeURIComponent ('{{espay_api_key_callback_url}}{{provider_type}}/booking/'+btoa(order_number)),
    display : 'tab'
},
sgoPlusIframe = document.getElementById("sgoplus-iframe");
if (sgoPlusIframe !== null) {
    sgoPlusIframe.src = SGOSignature.getIframeURL(data);
}
SGOSignature.receiveForm();
};
</script>

<section class="testimonial-area section-gap overlay-bg" data-aos="fade-up" style="padding-top:30px; padding-bottom:60px; z-index:1; position:relative;">
    <div class="container">
        <div class="row">
            <div class="col-sm-12">
                <div id="parentId"></div>
                <iframe id="sgoplus-iframe" src="" scrolling="no" frameborder="0" width="100%" height="500"></iframe>
            </div>
        </div>
    </div>
</section>
{% else %}
<link href="{{ static_path }}css/espay/bootstrap.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="{{ static_path }}css/espay/stylev3.min.css" media="screen" rel="stylesheet" type="text/css">
<link href="{{ static_path }}css/espay/jumbotron-narrow.min.css" media="screen" rel="stylesheet" type="text/css">
<div class="loader">
</div>
<section class="testimonial-area section-gap overlay-bg" data-aos="fade-up" style="margin-top:-3.2vh;padding-top:30px; padding-bottom:60px; z-index:1; position:relative;">
    <div class="container" style="background-color:#FFFFFFE6">
        <div style="padding:5px;">
            <h3 style="" class="text-center">PEMBAYARAN ANDA BELUM SELESAI</h3>
            <div class="text-center"><span class="sub-label-header">YOUR PAYMENT IS UNCOMPLETED</span></div>
            <br>
            <div class="col-sm-6 col-md-6 col-lg-6">
                <div class="wrapper">
                    <form class="order-detail-form-atm">
                        <label class="header-title">Order Detail</label><br>
                        <span class="sub-label-header">Detail Pesanan</span>
                        <br> <br>
                        <table class="table table-responsive tbl-custom">
                            <tbody>
                                <tr>
                                    <td> <b>Nama Merchant</b><br>   <span class="sub-label">Merchant Name</span></td>
                                    <td>:</td>
                                    <td>{{name}} </td>
                                </tr>
                                <tr>
                                    <td> <b>Nomor Pemesanan</b><br>   <span class="sub-label">Order No</span></td>
                                    <td>:</td>
                                    <td> {{order_number}}</td>
                                </tr>

                                <tr>
                                    <td> <b>Tanggal/Jam Transaksi</b><br> <span class="sub-label">Date/Time Transaction</span>
                                    </td>
                                    <td>:</td>
                                    <td>{{create_date}}</td>
                                </tr>

                                <tr>
                                    <td colspan="3">
                                        <div id="emailresult" style="margin-top: 10px"></div>
                                        <br>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </form>
                </div>
            </div>

            <div class="col-sm-6 col-md-6 col-lg-6">

                <p class="label-total">Jumlah yang harus Dibayar</p> <span class="sub-label">Total Paid</span>

                <div class="panel panel-n">
                    <div class="panel-body-n">
                        <script>
                            document.write(getrupiah(`{{amount}}`));
                        </script>
                    </div>
                </div>

                <p class="label-total">Nomor Rekening</p> <span class="sub-label">Account Number</span>

                <div class="panel panel-default">
                    <div class="panel-body-n">
                        {{nomor_rekening}}
                    </div>
                </div>

                <p class="label-total">Nama / Kode Bank Tujuan</p> <span class="sub-label">Destination Bank Name /  Code </span>

                <div class="panel panel-default">
                    <div class="panel-body-n">
                        Bank BCA / 014
                    </div>
                </div>

                <p class="label-total">Pembayaran anda harus sudah dilakukan sebelum time limit</p>
                <span class="sub-label">Transfer Due Date</span>

                <div class="panel panel-default">
                    <div class="panel-body-n">
                        {{time_limit}}
                    </div>
                </div>
            </div>

            <div class="col-lg-12 p-3 div_dropdown border" onclick="div_dropdown('mTransfer');">
                <span><b>BCA m-Transfer</b></span>
                <span class="ion-ios-arrow-down" id="down_mTransfer" style="float: right; cursor: pointer; display: inline-block;"></span>
                <span class="ion-ios-arrow-up" id="up_mTransfer" style="float: right; cursor: pointer; display: none;"></span>
                <i class="fas fa-caret-down" style="color:{{color}}"></i>
            </div>
            <div class="col-lg-12 p-3 mb-3 border" id="div_mTransfer" style="display: none;">
                <h6 style="color:#f15a22;">Transfer antar Rek</h6><hr>
                <span><b>1.</b> Pilih menu <i>"m-BCA"</i> di ponsel Anda dan tekan OK/YES </span><br>
                <span><b>2.</b> Pilih menu <i>"m-Transfer"</i> dan tekan OK/YES </span><br>
                <span><b>3.</b> Pilih <i>"Antar Rek"</i> dan tekan OK/YES </span><br>
                <span><b>4.</b> Pilih <i>"Mata Uang (Rp/USD/SGD)"</i> dan tekan OK/YES </span><br>
                <span><b>5.</b> Masukkan <i>Jumlah Uang</i> yang akan ditransfer dan tekan OK/YES </span><br>
                <span><b>6.</b> Masukkan <i>No. Rekening</i> tujuan yang akan ditransfer dan tekan OK/YES </span><br>
                <span><b>7.</b> Masukkan <i>PIN m-BCA</i> Anda dan tekan OK/YES </span><br>
                <span><b>8.</b> Muncul keterangan "Berita" yang dapat Anda isi/kosongkan </span><br>
                <span><b>9.</b> Jika Anda memiliki lebih dari 1 (satu) rekening yang terhubung dengan m-BCA,
                    pilihnomor rekening yang akan digunakan, kemudian tekan OK/Yes</span><br>
                <span><b>10.</b> <b>Pastikan data transaksi yang muncul di layar konfirmasi telah benar.</b> Jika benar, tekan OK/YES dan lanjutkan
                    ke no.11. Jika tidak, diamkan selama beberapa saat sampai message tersebut hilang dan otomatis transaksi tersebut akan dibatalkan</span><br>
                <span><b>11.</b> Masukkan <i>PIN m-BCA</i> Anda dan tekan OK/YES </span><br>
                <span><b>12.</b> Setelah beberapa saat, Anda akan menerima message yang berisi informasi transaksi transfer Anda Berhasil atau Gagal.</span><br><br>
                <span><b>Note:</b> Untuk transfer ke rekening tujuan valuta asing, wajib memilih tujuan transfer (sesuai pilihan yang tampil di layar ponsel)</span><br><br>

                <h6 style="color:#f15a22;">Transfer antar bank</h6><hr>
                <span><b>1.</b> Pilih menu <i>"m-BCA"</i> di ponsel Anda dan tekan OK/YES </span><br>
                <span><b>2.</b> Pilih menu <i>"m-Transfer"</i> dan tekan OK/YES </span><br>
                <span><b>3.</b> Pilih <i>"Antar Bank"</i> dan tekan OK/YES </span><br>
                <span><b>4.</b> Masukkan <i>"Kode Bank"</i> tujuan dan tekan OK/YES </span><br>
                <span><b>5.</b> Masukkan <i>No. Rekening</i> tujuan yang akan ditransfer dan tekan OK/YES </span><br>
                <span><b>6.</b> Masukkan <i>Jumlah Uang</i> yang akan ditransfer dan tekan OK/YES </span><br>
                <span><b>7.</b> Pilih menu <i>"PIN m-BCA"</i> Anda dan tekan OK/YES </span><br>
                <span><b>8.</b> <b>Pastikan data transaksi yang muncul di layar konfirmasi telah benar.</b> Jika benar, tekan OK/YES dan lanjutkan
                    ke no.9. Jika tidak, diamkan selama beberapa saat sampai message tersebut hilang dan otomatis transaksi tersebut akan dibatalkan</span><br>
                <span><b>9.</b> Masukkan <i>PIN m-BCA</i> Anda dan tekan OK/YES </span><br>
                <span><b>10.</b> Setelah beberapa saat, Anda akan menerima message yang berisi informasi transaksi transfer Anda Berhasil atau Gagal.</span><br><br>
            </div>
            <div class="text-center" style="margin-top:10px;">
                <button class="btn btn-lg btn-default" id="btn_done" onclick="">Selesai</button>
            </div><br>
        </div>
        <script>
            url_callback = '{{espay_api_key_callback_url}}'+'{{provider_type}}'+'/booking/'+btoa(order_number);
            document.getElementById("btn_done").onclick = function() {window.location.assign(url_callback); }
        </script>

    </div>
</section>
<script>
    function div_dropdown(type){
        var general_down = document.getElementById('down_'+type);
        var general_up = document.getElementById('up_'+type);
        var general_show = document.getElementById('div_'+type);

        if (general_down.style.display === "none") {
            general_up.style.display = "none";
            general_down.style.display = "inline-block";
            general_show.style.display = "none";
        }
        else {
            general_up.style.display = "inline-block";
            general_down.style.display = "none";
            general_show.style.display = "block";
        }
    }
</script>
{% endif %}

{% endblock %}