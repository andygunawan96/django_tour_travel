{% extends 'tt_website_skytors/template_website_booking.html' %}
{% load i18n %}
{% load static from staticfiles %}
{% block content %}
<!--<script src="{{ static_path }}js/webservice_token.js"></script>-->
<script src="{{ static_path }}vendor/jquery/jquery-3.2.1.min.js"></script>
<script src="{{ static_path }}js/webservice_token.js"></script>
<script src="{{ static_path }}js/webservice_agent.js"></script>
<script src="{{ static_path }}js/webservice_account.js"></script>
<script src="{{ static_path }}js/webservice_issued_offline.js"></script>
<script src="{{ static_path }}js/agent_javascript.js"></script>
<script src="{{ static_path }}js/issued_offline_javascript.js"></script>
<script>
    time = 300;
    triggered_balance();

    destination = [];
    {% for airline in airline_destinations %}
        destination.push({
            "name": "{{airline.name}}",
            "code": "{{airline.code}}"
        });
    {% endfor %}

    {% for train in train_destination %}
        train_destination = `{{train}}`;
        train_destination = train_destination.replace(/&#39;/g, "");
        train_destination = train_destination.replace('[', "");
        train_destination = train_destination.replace(']', "");
        destination.push({
            'code':train_destination.split(', ')[0],
            'name':train_destination.split(', ')[1]
        });
    {% endfor %}
    get_balance();
    console.log(`{{username}}`);
</script>

<section class="destinations-area" style="padding-top:30px; padding-bottom:40px;">
    <div class="container">
        <div class="banner-right" style="margin-bottom:25px;">
            <div class="row form-wrap">
                <div class="col-lg-12">
                    <div class="row" style="border:2px solid #f15a22;">
                        <div class="col-lg-12" style="margin-bottom:15px; margin-top:15px;">
                            <h3>ISSUED OFFLINE</h3>
                        </div>
                        <div class="col-lg-6">
                            <div class="row" style="text-align:left;">
                                <div class="col-lg-12">
                                    <span>Agent</span><br/>
                                    <div class="input-container-search-ticket">
                                        <input type="text" class="form-control" id="agent" name="agent" value="{{username.agent_name}}" readonly="readonly"/>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <span>Agent Type</span><br/>
                                    <div class="input-container-search-ticket">
                                        <input type="text" class="form-control" id="agent_type" name="agent_type" value="{{username.agent_type_name}}" readonly="readonly"/>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <span>Contact Person</span><br/>
                                    <div class="row">
                                        <div class="col-lg-8 col-md-8 col-sm-8 col-xs-8" style="text-align:left;">
                                            <div class="input-container-search-ticket">
                                                <input type="text" style="width:100%;" class="form-control" id="contact_person" name="contact_person" readonly="readonly"/>
                                                <input type="hidden" id="contact_id" name="contact_id" />
                                            </div>
                                        </div>
                                        <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2" style="padding:0px 15px 0px 0px; text-align:right;">
                                            <button type="button" style="width:95%;" class="primary-btn" data-toggle="modal" data-target="#myModal"><i class="fas fa-search"></i></button>
                                        </div>
                                        <div class="col-lg-2 col-md-2 col-sm-2 col-xs-2" style="padding:0px 15px 0px 0px;; text-align:right;">
                                            <button type="button" style="width:95%;" class="primary-btn" id="booker_clear" onclick="clear_passenger('Booker', 0);"/><i class="fas fa-times"></i></button>
                                        </div>
                                        <!-- Modal -->
                                        <div class="modal fade" id="myModal" role="dialog">
                                            <div class="modal-dialog">

                                                <!-- Modal content-->
                                                <div class="modal-content">
                                                    <div class="modal-header">
                                                        <h4 class="modal-title">Booker</h4>
                                                        <button type="button" class="close" data-dismiss="modal">&times;</button>
                                                    </div>
                                                    <div class="modal-body">
                                                        <input type="text" id="train_booker_search" placeholder="Search" />
                                                        <button type="button" class="btn btn-default" onclick="search_passenger('Booker','1','issued_offline')">Search</button>
                                                        <div id="search_result" style="overflow:auto;height:200px;">

                                                        </div>
                                                    </div>
                                                    <div class="modal-footer">
                                                        <button type="button" class="btn btn-default" data-dismiss="modal">Close</button>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <span>Transaction Type</span><br/>
                                    <div class="input-container-search-ticket btn-group">
                                        <div class="form-select" id="default-select">
                                            <select id="transaction_type" name="transaction_type" onchange="change_transaction_type();">

                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <span>Sector</span><br/>
                                    <div class="input-container-search-ticket btn-group">
                                        <div class="form-select">
                                            <select id="sector" name="sector">

                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12" style="margin-bottom:15px;">
                                    <span>Total Sale Price</span><br/>
                                    <div class="input-container-search-ticket">
                                        <input type="text" class="form-control" id="total_sale_price" name="total_sale_price"/>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <span>Agent NTA Price</span><br/>
                                    <span id="agent_nta_price"></span><br/>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-6">
                            <div class="row" style="text-align:left;">
                                <div class="col-lg-12">
                                    <span>Carrier</span><br/>
                                    <div class="input-container-search-ticket">
                                        <i class="fas fa-plane-departure icon-search-ticket"></i>
                                        <div class="form-select">
                                            <select class="form-control js-example-basic-single" name="state" style="width:100%;" id="carrier_name" placeholder="Carrier Name">

                                            </select>
                                        </div>
                                        <input type="hidden" name="carrier_name_id" id="carrier_name_id" />
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <span>PNR</span><br/>
                                    <div class="input-container-search-ticket">
                                        <input type="text" id="pnr" name="pnr" class="form-control"/>
                                    </div>
                                </div>
                                <div class="col-lg-12" style="margin-bottom:25px;">
                                    <span>Order From(Media)</span><br/>
                                    <div class="input-container-search-ticket btn-group">
                                        <div class="form-select">
                                            <select id="social_media" name="social_media">

                                            </select>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <span>Elapsed Time</span><br/>
                                    <br/>
                                </div>
                                <div class="col-lg-12">
                                    <span>Time Limit</span><br/>
                                    <div class="input-container-search-ticket">
                                        <input class="form-control"  type="datetime-local" id="timelimit" name="timelimit"/>
                                    </div>
                                </div>
                            </div>
                        </div>

                        <div class="col-lg-12" style="text-align:left;">
                            <span>Description</span><br/>
                            <textarea id="description" name="description" rows="6" cols="80" style="resize:none; width:100%; margin-bottom:15px;" class="form-control" placeholder="Leave any notes here"></textarea>
                        </div>

                        <div class="col-lg-12" style="text-align:left;">
                            <h4>List of Passenger</h4><br/>
                            <h5><a href="javascript:add_table_of_passenger();"  style="color:blue; text-decoration: underline;">Add <i class="fas fa-plus-circle"></i></a></h5>
                            <br/>
                            <!--                            <td><a href="javascript:delete_table_of_passenger();">DELETE GANTI ICON</a></td>-->
                            <table id="table_of_passenger" name="table_of_passenger" style="width:100%;" class="list-of-table">
                                <tr>
                                    <th style="width:5%;">No.</th>
                                    <th style="width:40%;">Name</th>
                                    <th style="width:35%;">Pax Type</th>
                                    <th style="width:20%;"></th>
                                </tr>
                            </table>
                        </div>

                        <div class="col-lg-12" style="text-align:left;margin-top:15px;" id="show_line" hidden>
                            <h4>Segment</h4><br/>
                            <h5><a href="javascript:add_table_of_line();" style="color:blue; text-decoration: underline;">Add <i class="fas fa-plus-circle"></i></a></h5>
                            <br/>
<!--                            <th><a href="javascript:delete_table_of_line();">DELETE GANTI ICON</a></th>-->
                            <table id="table_of_line" name="table_of_line" style="width=100%" class="list-of-table">
                                <tr>
                                    <th style="width:5%;">No.</th>
                                    <th style="width:15%;">Origin</th>
                                    <th style="width:15%;">Destination</th>
                                    <th style="width:15%;">Departure Date</th>
                                    <th style="width:15%;">Arrival Date</th>
                                    <th style="width:5%;">Carrier Code</th>
                                    <th style="width:5%;">Carrier Number</th>
                                    <th style="width:10%;">Class</th>
                                    <th style="width:8%;">Sub Class</th>
                                    <th style="width:7%;"></th>
                                </tr>
                            </table>
                        </div>

                        <div class="col-lg-12" style="margin-top:15px;margin-bottom:15px;">
                            <button class="primary-btn text-uppercase" type="button" onclick="create_issued_offline()">SUBMIT</button>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<footer class="footer-area section-gap">
    <div class="container">
        <div class="row">
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h6>About RODEX TRIP</h6>
                    <p>
                        PT. Roda Express Sukses Mandiri adalah perusahaan yang bergerak di bidang Tour & Travel dan dikenal dengan nama RODEX TOUR & TRAVEL. Rodex Tour & Travel didirikan pertama kali pada tanggal 09 September 2009 bertempat di sebuah pusat perbelanjaan terkemuka di Surabaya yaitu Mall Pakuwon Trade Center (PTC). Di bawah kepemimpinan Bapak Galuh Suryono Cipto Adi, Rodex Tour & Travel mengalami perkembangan yang signifikan dari tahun ke tahun.
                    </p>
                    <p>
                        Hingga saat ini kami telah memiliki  lebih kurang 1.000 orang reseller yang teregister dan puluhan Cabang Mitra (Citra) yang tersebar di seluruh indonesia.
                    </p>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h6>Navigation Links</h6>
                    <div class="row">
                        <div class="col">
                            <ul>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">Feature</a></li>
                                <li><a href="#">Services</a></li>
                                <li><a href="#">Portfolio</a></li>
                            </ul>
                        </div>
                        <div class="col">
                            <ul>
                                <li><a href="#">Team</a></li>
                                <li><a href="#">Pricing</a></li>
                                <li><a href="#">Blog</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-4 col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h6>Newsletter</h6>
                    <p>
                        Dapatkan Penawaran Langsung di Inbox Email Anda!
                    </p>
                    <div id="mc_embed_signup">
                        <form target="_blank" action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01" method="get" class="subscription relative">
                            <div class="input-group d-flex flex-row">
                                <input name="EMAIL" placeholder="Email Address" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Email Address '" required="" type="email">
                                <button class="btn bb-btn"><span class="lnr lnr-location"></span></button>
                            </div>
                            <div class="mt-10 info"></div>
                        </form>
                    </div>
                </div>
            </div>
        </div>
        <div class="row footer-bottom d-flex justify-content-between align-items-center">
            <p class="col-lg-8 col-sm-12 footer-text m-0"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved by RODEX TRIP
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
            <div class="col-lg-4 col-sm-12 footer-social">
                <a href="#"><i class="fas fa-facebook-square"></i></a>
                <a href="#"><i class="fas fa-twitter-square"></i></a>
                <a href="#"><i class="fas fa-instagram"></i></a>
            </div>
        </div>
    </div>
</footer>

<script>
    $( document ).ready(function() {
      $('.js-example-basic-single').select2();
      get_data_issued_offline();
      //get_data2();
    });

</script>

{% endblock %}
