{% extends 'tt_website_skytors/template_website_booking.html' %}
{% load i18n %}
{% load static from staticfiles %}
{% block content %}
<!--<script src="{{ static_path }}js/webservice_token.js"></script>-->
<script src="{{ static_path }}js/daterangepicker.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/moment.min.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}vendor/jquery/jquery-3.2.1.min.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_token.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/hotel_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_hotel.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/moment.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/agent_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_agent.js?version={{javascript_version}}"></script>

<script>
    signature = `{{signature}}`;
    $(document).ready(function() {
        $('#asdasd').datepicker({
            'format': 'd M yyyy',
            'todayHighlight': true,
            'autoclose': true
        });
    });
    city_id = {{response.location.city_id}};
    time_limit = {{time_limit}};
    session_time_limit();
</script>

{% include 'tt_website_skytors/header.html' %}
<section class="destinations-area" style="padding-top:30px; padding-bottom:40px; z-index:1;">
    <div class="container">
        <div class="row align-items-center justify-content-between d-flex">
            <div class="col-lg-12" id="breadcrumbs_create" style="padding-bottom:15px;">

            </div>
        </div>
        <div class="row" style="padding-bottom:15px;">
            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-6" style="padding-top:10px;">
                <span style="font-size:14px; font-weight:600;">Session Time <span style="font-size:16px; font-weight:700; color:#f15a22;" id="session_time"> </span></span>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6 col-xs-6" style="padding-top:10px;">
                <span style="font-size:14px; font-weight:600;">Elapsed Time <span style="font-size:16px; font-weight:700; color:#f15a22;" id="elapse_time"> </span></span>
            </div>
        </div>

        <div class="row" style="position:sticky;top: 66px;z-index: 24;">
            <div class="col-lg-12">
                <div class="box-sticky-hotel" style="padding-right:0px;">
                    <button class="content-hotel primary-btn-sticky-hotel" type="button" id="information-hotel">Hotel Description</button>
                    <button class="content-hotel primary-btn-sticky-hotel" type="button" id="facility-hotel">Facility</button>
                    <button class="content-hotel primary-btn-sticky-hotel" type="button" id="location-hotel">Location Info</button>
                    <button class="content-hotel primary-btn-sticky-hotel" type="button" id="select-room-hotel">Select Room</button>

                    <button class="myticket_static" data-toggle="modal" data-target="#myModalCopyHotel" onclick="get_checked_copy_result_room();" style="margin: 8px;">
                        <span style="color:white; font-size:14px;"><span id="badge-copy-notif">0</span> Copy Selected <i class="fas fa-copy"></i></span>
                    </button>
                </div>
            </div>
        </div>
        <div class="row" style="position:sticky; top:162px; z-index:997; display:none;margin-bottom:15px;" id="mybuttonsticky">
            <div class="col-lg-12">
                <button type="button" class="primary-btn-ticket" style="width:100%;" data-toggle="modal" data-target="#myModalCopyHotel" onclick="get_checked_copy_result_room();">
                    <span style="color:white; font-size:12px;"> List Copy Hotel </span>
                    <span class="badge-notif2 animated bounceIn" id="badge-copy-notif2">0</span>
                </button>
            </div>
        </div>
        <form action="{% url 'tt_website_skytors:hotel_passenger' %}" id="goto_passenger" method="POST" style="background:white; padding:15px 15px 0px 15px; border:1px solid #cdcdcd;">
            {% csrf_token %}
            <div class="row">
                <div class="col-lg-12 div-information-hotel" style="background:white; padding-top:5px; padding-bottom:40px;">
                    <div class="row">
                        <div class="col-lg-12">
                            <span class="name_hotel" style="font-size:22px; font-weight:bold; color:black;">{{response.name}}</span>
                            <span class="rating_hotel" hidden>{{response.rating}}</span>
                            <span>
                                {% for i in rating %}
                                    <i class="fas fa-star" style="color:#FFC44D;"></i>
                                {% endfor %}
                            </span>
                            <br/>
                            <i class="fas fa-map-marker-alt" style="color:#f15a22;"></i>
                            <span class="address_hotel">{% if response.location.address != false %}{{response.location.address}}{% endif %}{% if response.location.city != false %}, {{response.location.city}}{% endif %}{% if response.location.kelurahan != false %}, {{response.location.kelurahan}}{% endif %}{% if response.location.state != false %}, {{response.location.state}}{% endif %}{% if response.location.zipcode != false %}, {{response.location.zipcode}}{% endif %}</span>
                            - <a href="#" style="color:blue; text-decoration: underline;">Show Map</a><br/>
                            <hr/>
                        </div>

                        <div class="col-lg-7" style="margin-bottom:15px;">
                            <div class="row">
                                <div class="col-lg-12">
                                    <div class="owl-carousel-hotel-img owl-theme">
                                        {% for i in response.images %}
                                        <div class="item" style="cursor:zoom-in; float:none; display:inline-block;">
                                            <img class="img-fluid zoom-img" src="{{i.url}}" style="margin: auto; max-height:400px;" alt="">
                                        </div>
                                        {% endfor %}
                                        <!--                                        <div class="item" style="cursor:zoom-in; float:none; display:inline-block;">-->
                                        <!--                                            <img class="img-fluid zoom-img" src="{{static_path}}images/hotel-1.jpg" style="margin: auto; max-height:400px;" alt="">-->
                                        <!--                                        </div>-->
                                    </div>
                                </div>
                                <div class="col-lg-12">
                                    <div class="owl-carousel-hotel owl-theme">
                                        {% for i in response.images %}
                                        <div class="item" style="cursor:pointer;">
                                            <img class="img-fluid" src="{{i.url}}" style="max-width:100%; height:75px;">
                                        </div>
                                        {% endfor %}
                                        <!--                                        <div class="item" style="cursor:pointer;">-->
                                        <!--                                            <img class="img-fluid" src="{{static_path}}images/hotel-1.jpg" style="max-width:100%; height:75px;">-->
                                        <!--                                        </div>-->
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div class="col-lg-5" style="margin-bottom:10px;">
                            <h4>About</h4>
                            <hr/>
                            <h4 style="padding-top:15px; color:#f15a22;">Description</h4>
                            <p style="text-align: justify; height:370px; overflow: auto;">
                                {% if response.description != '' %}
                                {{response.description}}
                                If you’re looking for a charming hotel in Koto, look no further than Sotetsu Fresa Inn Tokyo-Toyocho. While staying at Sotetsu Fresa Inn Tokyo-Toyocho, visitors can check out Susaki Shrine (0.6 mi) and Ogibashi Komon Gate (1.1 mi), some of Koto's top attractions.	You’ll enjoy relaxing rooms that offer a refrigerator and air conditioning, and you can stay connected during your stay as Sotetsu Fresa Inn Tokyo-Toyocho offers guests free wifi.	The hotel features a 24 hour front desk, room service, and newspaper. Plus, Sotetsu Fresa Inn Tokyo-Toyocho offers an on-site restaurant, providing a pleasant respite from your busy day.	If you like Korean restaurants, Sotetsu Fresa Inn Tokyo-Toyocho is conveniently located near Korean cuisine Ourimu, Teppan Dining Teike Ikedaya, and Yakiniku Iki. Looking to explore? Then look no further than Fukagawa Edo Museum (1.2 mi), Museum of Contemporary Art Tokyo (0.9 mi), and Sunamachi Ginza Shopping Street (0.9 mi), which are some popular Koto attractions – all conveniently located within walking distance of the hotel.	The staff at Sotetsu Fresa Inn Tokyo-Toyocho looks forward to serving you during your upcoming visit.
                                {% else %}
                                No Description
                                {% endif %}
                            </p>
                        </div>
                    </div>
                </div>

                <div class="col-lg-12 div-facility-hotel" style="background:#f9f9f9; padding-top:40px; padding-bottom:40px;">
                    <h4>Facility</h4>
                    <hr/>
                    <div class="row">
                        {% for facility in response.facilities %}
                        <div class="col-md-3 col-xs-4" style="width:25%;">
                            {% if facility.url != false %}<i class="fas fa-circle"></i>{% else %}<i class="fas fa-circle"></i>{% endif %}
                            {{facility.facility_name}}
                        </div>
                        {% endfor %}
                    </div>

                </div>

                <div class="col-lg-12 div-location-hotel" style="background:white; padding-top:40px; padding-bottom:40px;">
                    <h4>Location Info</h4>
                    <i class="fas fa-map-marker-alt" style="color:#f15a22;"></i>
                    <span style="font-size:14px; font-weight:500;">{% if response.location.address != false %}{{response.location.address}}{% endif %}{% if response.location.city != false %}, {{response.location.city}}{% endif %}{% if response.location.kelurahan != false %}, {{response.location.kelurahan}}{% endif %}{% if response.location.state != false %}, {{response.location.state}}{% endif %}{% if response.location.zipcode != false %}, {{response.location.zipcode}}{% endif %}</span>
                </div>

                <div class="col-lg-12 div-select-room-hotel" style="background:#f9f9f9; padding-top:40px; padding-bottom:40px;">
                    <div class="row">
                        <div class="col-lg-12">
                            <h4>Room</h4>
                            <hr/>
                        </div>

                        <div class="col-lg-8">
                            <div class="banner-right">
                                <div class="row form-wrap" style="padding:0px !important;">
                                    <div class="col-lg-12" style="text-align:left;">
                                        <h4>Change Schedule</h4>
                                    </div>
                                    <div class="col-lg-12">
                                        <span style="float:left;"><i class="fas fa-calendar-alt"></i> Check In - Check Out</span>
                                        <div class="input-container-search-ticket">

                                            <input class="form-control" type="text" name="hotel_checkin_checkout" id="hotel_checkin_checkout" placeholder="Check-In - Check-out Date " value="{{check_in}} - {{check_out}}" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Check-In - Check-out Date '" autocomplete="off" readonly onchange="hotel_detail_request(`{{response.external_code}}`);"/>
                                            <i class="fas fa-moon icon-search-ticket" id="total_night_search" style="border: 1px solid #cdcdcd;">1</i>

                                            <!--<input class="form-control" type="hidden" name="checkin_date" id="checkin_date" placeholder="Check-In Date " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Check-in Date '" autocomplete="off" value="{{check_in}}"  onchange="change_date('checkin');"/>-->
                                            <!--<input class="form-control" type="hidden" name="checkout_date" id="checkout_date" placeholder="Check-In Date " onfocus="this.placeholder = ''" onblur="this.placeholder = 'Check-in Date '" autocomplete="off" value="{{check_out}}" onchange="change_date('checkout');"/>-->
                                        </div>
                                    </div>
                                </div>
                            </div>

                            <div class="row" id="loading-detail-hotel">
                                <div class="col-lg-12">
                                    <div class="sk-circle">
                                        <div class="sk-circle1 sk-child"></div>
                                        <div class="sk-circle2 sk-child"></div>
                                        <div class="sk-circle3 sk-child"></div>
                                        <div class="sk-circle4 sk-child"></div>
                                        <div class="sk-circle5 sk-child"></div>
                                        <div class="sk-circle6 sk-child"></div>
                                        <div class="sk-circle7 sk-child"></div>
                                        <div class="sk-circle8 sk-child"></div>
                                        <div class="sk-circle9 sk-child"></div>
                                        <div class="sk-circle10 sk-child"></div>
                                        <div class="sk-circle11 sk-child"></div>
                                        <div class="sk-circle12 sk-child"></div>
                                    </div>
                                    <div style="text-align:center"><h6>PLEASE WAIT</h6></div>
                                </div>
                            </div>
                            <div id="select_copy_all">

                            </div>
                            <div id="detail_room_pick">

                            </div>
                        </div>

                        <div class="col-lg-4">
                            <div id="ticket_price">
                                <div class="row" style="padding:15px;">
                                    <div class="col-lg-12" style="background-color:#f15a22; padding:5px;">
                                        <center>
                                            <span style="color:white; font-size:16px;"> Price Detail <i class="fas fa-money-bill-wave"></i></span>
                                        </center>
                                    </div>
                                    <div class="col-lg-12" style="border:1px solid #cdcdcd; padding-bottom: 15px;">
                                        <h5 id="product_title" style="padding-top:10px;">{{response.name}}</h5>
                                        <hr/>
                                        <div style="padding-top:10px;" id="hotel_detail_table">

                                        </div>
                                        <div style="padding-bottom:10px;" id="not_room_select">
                                            <h6>Please select room first</h6>
                                        </div>
                                    </div>

                                    <input type="hidden" id="hotel_detail_send" name="hotel_detail_send"/>
                                </div>
                            </div>
                            <div id="data_id">

                            </div>
                        </div>
                    </div>
                </div>

                <div class="col-lg-12">
                    <div class="modal fade" id="myModalCopyHotel" role="dialog">
                        <div class="modal-dialog">
                            <!-- Modal content-->
                            <div class="modal-content">
                                <div class="modal-header">
                                    <h4 class="modal-title" style="color:white;"> List Copy Hotel <i class="fas fa-copy"></i></i></h4>
                                    <button type="button" class="close" data-dismiss="modal">&times;</button>
                                </div>
                                <div class="modal-body">
                                    <div class="row" id="choose-hotel-copy">
                                        <div class="col-lg-12">
                                            <h6>Please choose your room want to copy!</h6>
                                        </div>
                                    </div>
                                    <div id="show-list-copy-hotel">

                                    </div>
                                    <textarea id="data_copy" name="data_copy" rows="4" hidden></textarea>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <input type="hidden" id="time_limit_input" name="time_limit_input" />
        </form>
    </div>
</section>
{% include 'tt_website_skytors/footer.html' %}


<script>
    var myIndex = 0;

    $(function() {
      breadcrumb_create("hotel", 3, 0);
      $(window).scroll(function() {
        if($(this).scrollTop()>=$('.div-information-hotel').position().top-130 && $(this).scrollTop()<$('.div-facility-hotel').position().top-130){
            active_sticky_hotel("information");
        }
        else if($(this).scrollTop()>=$('.div-facility-hotel').position().top-130 && $(this).scrollTop()<$('.div-location-hotel').position().top-130){
            active_sticky_hotel("facility");
        }
        else if($(this).scrollTop()>=$('.div-location-hotel').position().top-130 && $(this).scrollTop()<$('.div-select-room-hotel').position().top-130){
            active_sticky_hotel("location");
        }
        else if($(this).scrollTop()>=$('.div-select-room-hotel').position().top-130 && $(this).scrollTop()<$('.div-review-hotel').position().top-130){
            active_sticky_hotel("select");
        }
        else if($(this).scrollTop()>=$('.div-review-hotel').position().top-130){
            active_sticky_hotel("review");
        }
        else if($(this).scrollTop() < $('.div-information-hotel').position().top){
            $(".content-hotel").removeClass("sticky-hotel-active");
        }
      });
      var oneDay = 24*60*60*1000;
      var firstDate = new Date(`{{check_in}}`);
      var secondDate = new Date(`{{check_out}}`);
      var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
      $("#total_night_search").text(diffDays);

      $('input[name="hotel_checkin_checkout"]').daterangepicker({
          singleDatePicker: false,
          autoUpdateInput: true,
          opens: 'center',
          startDate: firstDate,
          endDate: secondDate,
          minDate: moment().subtract(-1, 'days'),
          maxDate: moment().subtract(-366, 'days'),
          showDropdowns: true,
          locale: {
              format: 'DD MMM YYYY',
          }
      });
      hotel_detail_request(`{{response.external_code}}`);
      $('input[name="hotel_checkin_checkout"]').on('apply.daterangepicker', function(ev, picker) {
          $(this).val(picker.startDate.format('DD MMM YYYY') + ' - ' + picker.endDate.format('DD MMM YYYY'));
            $("#checkin_date").val(picker.startDate.format('DD MMM YYYY'));
            $("#checkout_date").val(picker.endDate.format('DD MMM YYYY'));

            var oneDay = 24*60*60*1000;
            var firstDate = new Date($("#checkin_date").val());
            var secondDate = new Date($("#checkout_date").val());

            var diffDays = Math.round(Math.abs((firstDate.getTime() - secondDate.getTime())/(oneDay)));
            $("#total_night_search").text(diffDays);
            change_date('checkin');
        });
    });

    function carousel() {
      var i;
      var x = document.getElementsByClassName("mySlides");
      for (i = 0; i < x.length; i++) {
        x[i].style.display = "none";
      }
      myIndex++;
      if (myIndex > x.length) {myIndex = 1}
      x[myIndex-1].style.display = "block";
      setTimeout(carousel, 5000); // Change image every 2 seconds
    }

    function change_date(type){
        $('#loading-detail-hotel').show();
        if(type == 'checkin'){
            change_date_hotel('checkin');
            hotel_detail(`{{response.external_code}}`);
        }else{
            change_date_hotel('checkout');
            hotel_detail(`{{response.external_code}}`);
        }
    }

    function change_date_hotel(type){
        if(type == 'checkin'){
            var date = moment(document.getElementById('hotel_checkin').value);
            date = date.add(1, 'days');
            if(document.getElementById('hotel_checkout').value == '' || moment(document.getElementById('hotel_checkin').value) >= moment(document.getElementById('hotel_checkout').value))
                document.getElementById('hotel_checkout').value = date._d.toString().split(' ')[2]+' '+date._d.toString().split(' ')[1]+' '+date._d.toString().split(' ')[3];
        }else{
            if(moment(document.getElementById('hotel_checkin').value) >= moment(document.getElementById('hotel_checkout').value)){
            }
        }
    }
</script>

{% endblock %}


<!--<div style="background-color:#f15a22;">-->
<!--    <ul class="nav nav-tabs" id="myTab" role="tablist">-->
<!--        <li class="nav-item">-->
<!--            <a class="nav-link active" id="facilities-tab" data-toggle="tab" href="#facilities" role="tab" aria-controls="facilities" aria-selected="true">-->
<!--                <span style="color:white;"> Facilities </span>-->
<!--            </a>-->
<!--        </li>-->
<!--        <li class="nav-item">-->
<!--            <a class="nav-link" id="description-tab" data-toggle="tab" href="#description" role="tab" aria-controls="description" aria-selected="false">-->
<!--                <span style="color:white;"> Description </span>-->
<!--            </a>-->
<!--        </li>-->
<!--    </ul>-->
<!--</div>-->

<!--<div class="tab-content" id="myTabContent">-->
<!--    <div class="tab-pane fade show active" id="facilities" role="tabpanel" aria-labelledby="facilities-tab" style="padding:10px; border-left:1px solid black; border-bottom:1px solid black; border-right:1px solid black; max-height: 410px; overflow-y: auto;">-->
<!--        <span>-->
<!--            {% for facility in response.facilities %}-->
<!--            {{facility.facility_name.facility_name}}<br/>-->
<!--            {% endfor %}-->
<!--        </span>-->
<!--    </div>-->
<!--    <div class="tab-pane fade" id="description" role="tabpanel" aria-labelledby="description-tab" style="padding:10px; border-left:1px solid black; border-bottom:1px solid black; border-right:1px solid black; max-height: 410px; overflow-y: auto;">-->
<!--        <p style="text-align: justify;">-->
<!--            {% if response.description != '' %}-->
<!--            {{response.description}}-->
<!--            {% else %}-->
<!--            No Description-->
<!--            {% endif %}-->
<!--        </p>-->
<!--    </div>-->
<!--</div>-->