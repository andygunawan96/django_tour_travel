{% extends 'tt_website_skytors/template_website_booking.html' %}
{% load i18n %}
{% load static from staticfiles %}
{% block content %}
<!--<script src="{{ static_path }}js/webservice_token.js"></script>-->
<script src="{{ static_path }}vendor/jquery/jquery-3.2.1.min.js"></script>
<script src="{{ static_path }}js/webservice_token.js"></script>
<script src="{{ static_path }}js/hotel_javascript.js"></script>
<script src="{{ static_path }}js/webservice_hotel.js"></script>
<script src="{{ static_path }}js/moment.js"></script>

<script src="{{ static_path }}js/webservice_agent.js"></script>

<style>
    @media only screen and (min-width: 991px) {
        #header_home {
            padding-top: 100px;
        }
    }
    @media only screen and (max-width: 990px) {
        #header_home {
            padding-top: 0px;
        }
    }
</style>
<script>
    $(document).ready(function() {
        $('#asdasd').datepicker({
            'format': 'd M yyyy',
            'todayHighlight': true,
            'autoclose': true
        });
    });

</script>

<nav class="navbar navbar-expand-lg navbar-dark ftco_navbar bg-dark ftco-navbar-light" id="ftco-navbar">
    <div class="container">
        <a class="navbar-brand" href="{% url 'tt_website_skytors:index'%}">Skytors</a>
        <button class="navbar-toggler" type="button" data-toggle="collapse" data-target="#ftco-nav" aria-controls="ftco-nav" aria-expanded="false" aria-label="Toggle navigation">
            <span class="oi oi-menu"></span> Menu
        </button>
        <div class="collapse navbar-collapse" id="ftco-nav">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item"><a href="#" class="nav-link">{% trans 'Home' %}</a></li>
                <li class="nav-item dropdown"><a href="#" class="nav-link dropdown-toggle" data-toggle="dropdown" role="button" aria-haspopup="true" aria-expanded="false">Top Up</a>
                    <ul class="dropdown-menu">
                        <li><a href="#">Action</a></li>
                        <li><a href="#">Another action</a></li>
                        <li><a href="#">Something else here</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">Separated link</a></li>
                        <li role="separator" class="divider"></li>
                        <li><a href="#">One more separated link</a></li>
                        <input type="hidden" id="co_uid" name="co_uid" value="{{co_uid}}" />
                    </ul>
                </li>
                <li class="nav-item"><a href="#" class="nav-link">Reservation</a></li>
                <li class="nav-item"><a href="#" class="nav-link">Highlights</a></li>
                <li class="nav-item"><a href="#" class="nav-link">User Guide</a></li>
                <!--<li class="nav-item"><a href="#" class="nav-link">Points</a></li>-->
                <li class="nav-item"><a href="#" class="nav-link">Partnership</a></li>
                {% if username != null %}
                <li class="nav-item"><a href="#" class="nav-link" id="balance">Balance: Rp {{balance}}</a></li>
                <li class="nav-item"><a href="#" class="nav-link">{{username}}</a></li>
                {% else %}
                <li class="nav-item"><a href="{% url 'tt_website_skytors:login'%}" class="nav-link">Sign in</a></li>
                {% endif %}
            </ul>
        </div>
    </div>
</nav>
<!-- END nav -->


<div class="ftco-section-search" style="background-color:#989898;">
    <div class="container">
        <form action="{% url 'tt_website_skytors:hotel_passenger' %}" id="goto_passenger" method="POST">
            {% csrf_token %}
            <!--train-->
            <div class="block-17 row" id="header_home">
                <div class="col-sm-9" id="ticket_detail">
                    <div style="border: 1px solid #f5f5f5">
                        <div class="row">
                            <div class="col-sm-4">
                                <div class="w3-content w3-section">
                                    {% for i in response.images %}
                                    <img class="mySlides" src="{{i.url}}" style="width: 260px; height: 187px;">
                                    {% endfor %}
                                </div>
                            </div>
                            <div class="col-sm-8" style="background:#f15a22;margin-left:-15px;">
                                <h3 style="margin:0px 0px 5px 0px; font-size:20px;">{{response.name}}</h3>
                                <div class="row" style="margin-left: -5px;">
                                </div>
                            </div>
                        </div>
                        <div>
                            <label>{{response.description}}</label><br/>
                            <label>Facility</label><br/>
                            <label>
                            {% for i in response.facilities %}
                                {{i.description}},
                            {% endfor %}
                            </label>
                            <label>
                            {% if response.location.address != False %}
                                {{response.location.address}}
                            {% endif %}
                            {% if response.location.city != False %}
                                {{response.location.city}}
                            {% endif %}
                            {% if response.location.kelurahan != False %}
                                {{response.location.kelurahan}}
                            {% endif %}
                            {% if response.location.state != False %}
                                {{response.location.state}}
                            {% endif %}
                            {% if response.location.zipcode != False %}
                                {{response.location.zipcode}}
                            {% endif %}
                            </label>
                        </div>
                        <div style="padding-left:5px;" id="date">
                            <div class="form-group">
                                <label>Check-in</label>
                                <div class="depart-airlines-logo">
                                    <input class="form-control calendar-logo" type="text" name="hotel_checkin" id="hotel_checkin" placeholder="Choose your checkin date" autocomplete="off" value="{{check_in}}" onchange="change_date('checkin');" />

                                </div>
                            </div>
                            <div class="form-group" style="margin-top:-5px;">
                                <label>Check-out</label>
                                <div class="arrival-airlines-logo">
                                    <input id="hotel_checkout" class="form-control" name="hotel_checkout" placeholder="Choose your checkout date" autocomplete="off" value="{{check_out}}" onchange="change_date('checkout');" />
                                </div>
                            </div>
                        </div>
                        <div id="detail_room_pick">

                        </div>

                        <!--<div style="padding:0 20px;margin-top:5px;" id="detail_to_passenger_page">-->

                        <!--</div>-->

                    </div>
                </div>


                <div class="col-sm-3" id="ticket_price">

                    <div class="themespark-price-container" id="themespark-price-container" style="border: 1px solid #f5f5f5;padding">
                        <h3 style="text-align:center; color:#f15a22;">Detail</h3>
                        <div class="row">
                            <div class="col-xs-12">
                                <span id="product_title" style="font-weight: bold;">{{response.name}}</span>
                                    <br><span id="product_type_title"></span>

                                <br><br>
                            </div>
                        </div>
                        <div id="hotel_detail_table">

                        </div>
                        <input type="hidden" id="hotel_detail_send" name="hotel_detail_send"/>

                    </div>
                </div>
                <div id="data_id">

                </div>
            </div>
        </form>
    </div>
</div>

<footer class="ftco-footer ftco-bg-dark ftco-section">
    <div class="container">
        <div class="row mb-5">
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">Voyage Fellow Tourist</h2>
                    <p>Far far away, behind the word mountains, far from the countries Vokalia and Consonantia, there live the blind texts.</p>
                </div>
            </div>
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">Book Now</h2>
                    <ul class="list-unstyled">
                        <li><a href="#" class="py-2 d-block">Flight</a></li>
                        <li><a href="#" class="py-2 d-block">Hotels</a></li>
                        <li><a href="#" class="py-2 d-block">Tour</a></li>
                        <li><a href="#" class="py-2 d-block">Car Rent</a></li>
                        <li><a href="#" class="py-2 d-block">Beach &amp; Resorts</a></li>
                        <li><a href="#" class="py-2 d-block">Mountains</a></li>
                        <li><a href="#" class="py-2 d-block">Cruises</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">Top Deals</h2>
                    <ul class="list-unstyled">
                        <li><a href="#" class="py-2 d-block">Luxe Hotel</a></li>
                        <li><a href="#" class="py-2 d-block">Venice Tours</a></li>
                        <li><a href="#" class="py-2 d-block">Deluxe Hotels</a></li>
                        <li><a href="#" class="py-2 d-block">Boracay Beach &amp; Resorts</a></li>
                        <li><a href="#" class="py-2 d-block">Beach &amp; Resorts</a></li>
                        <li><a href="#" class="py-2 d-block">Fuente Villa</a></li>
                        <li><a href="#" class="py-2 d-block">Japan Tours</a></li>
                        <li><a href="#" class="py-2 d-block">Philippines Tours</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <h2 class="ftco-heading-2">Contact Information</h2>
                    <ul class="list-unstyled">
                        <li><a href="#" class="py-2 d-block">198 West 21th Street, Suite 721 New York NY 10016</a></li>
                        <li><a href="#" class="py-2 d-block">+ 1235 2355 98</a></li>
                        <li><a href="#" class="py-2 d-block">info@yoursite.com</a></li>
                        <li><a href="#" class="py-2 d-block">email@email.com</a></li>
                    </ul>
                </div>
            </div>
            <div class="col-md">
                <div class="ftco-footer-widget mb-4">
                    <ul class="ftco-footer-social list-unstyled float-md-right float-lft">
                        <li class="ftco-animate"><a href="#"><span class="icon-twitter"></span></a></li>
                        <li class="ftco-animate"><a href="#"><span class="icon-facebook"></span></a></li>
                        <li class="ftco-animate"><a href="#"><span class="icon-instagram"></span></a></li>
                    </ul>
                </div>
            </div>
        </div>
        <div class="row">
            <div class="col-md-12 text-center">

                <p><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                    Copyright &copy;2017 SkyTors. All Rights Reserved.
                    <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
            </div>
        </div>
    </div>
</footer>

<script>
    hotel_detail(`{{response.external_code}}`);
    var myIndex = 0;
    carousel();

    function carousel() {
      var i;
      var x = document.getElementsByClassName("mySlides");
      for (i = 0; i < x.length; i++) {
        x[i].style.display = "none";
      }
      myIndex++;
      if (myIndex > x.length) {myIndex = 1}
      x[myIndex-1].style.display = "block";
      setTimeout(carousel, 5000); // Change image every 2 seconds
    }

    function change_date(type){
        console.log('asdasd');
        if(type == 'checkin'){
            change_date_hotel('checkin');
            hotel_detail(`{{response.external_code}}`);
        }else{
            change_date_hotel('checkout');
            hotel_detail(`{{response.external_code}}`);
        }
    }

    function change_date_hotel(type){
        if(type == 'checkin'){
            var date = moment(document.getElementById('hotel_checkin').value);
            date = date.add(1, 'days');
            console.log(document.getElementById('hotel_checkout').value);
            if(document.getElementById('hotel_checkout').value == '' || moment(document.getElementById('hotel_checkin').value) >= moment(document.getElementById('hotel_checkout').value))
                document.getElementById('hotel_checkout').value = date._d.toString().split(' ')[2]+' '+date._d.toString().split(' ')[1]+' '+date._d.toString().split(' ')[3];
        }else{
            console.log(moment(document.getElementById('hotel_checkin').value));
            console.log(moment(document.getElementById('hotel_checkout').value));
            if(moment(document.getElementById('hotel_checkin').value) >= moment(document.getElementById('hotel_checkout').value)){
                console.log('kasih error checkout di bawah checkin')
            }
        }
    }
</script>

<!-- loader -->
<div id="ftco-loader" class="show fullscreen"><svg class="circular" width="48px" height="48px"><circle class="path-bg" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke="#eeeeee"/><circle class="path" cx="24" cy="24" r="22" fill="none" stroke-width="4" stroke-miterlimit="10" stroke="#F96D00"/></svg></div>
{% endblock %}
