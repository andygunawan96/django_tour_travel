{% extends 'tt_website_skytors/template_website_booking.html' %}
{% load i18n %}
{% load static from staticfiles %}
{% block content %}
<!--<script src="{{ static_path }}js/webservice_token.js"></script>-->
<script src="{{ static_path }}vendor/jquery/jquery-3.2.1.min.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_token.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/activity_javascript.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_activity.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_agent.js?version={{javascript_version}}"></script>
<script src="{{ static_path }}js/webservice_account.js?version={{javascript_version}}"></script>
<script>
    offset = 600;
    get_new = true;
    activity_country = [];
    city = [];
    sub_category = {};
    sub_category_list = [];
    name = '';
    {% for country in activity_countries %}
        {% for city in country.city %}
            city.push({
                'name': '{{city.name}}', 'id':'{{city.id}}'
            });
        {% endfor %}
        activity_country.push({
            'city': city,
            'name': '{{country.name}}',
            'id': '{{country.id}}'
        });
        city = [];
    {% endfor %}

    {% for category in activity_categories %}
        console.log(category);
    {% endfor %}

    {% for key, value in activity_sub_categories.items %}
        {% for item in value %}
            name = '{{item.name}}';
            if(name.search('amp;') !== -1){
                name = name.replace(/&amp;/g, '&');
            }

            sub_category_list.push({
                'name': name,
                'id': '{{item.id}}'
            });
            name = '';
        {% endfor %}
        key = '{{key}}';
        sub_category[key.replace(/&amp;/g, '&')] = sub_category_list;
        sub_category_list = [];
    {% endfor %}
</script>

{% include 'tt_website_skytors/header.html' %}
<section class="price-area" data-aos="fade-up" style="padding-top:50px; padding-bottom:5px; background-color: black;">
    <div class="animated fadeInDown delay-1s">
        <div class="container">
            <div class="row">
                <div class="col-lg-12" style="padding:0;">
                    <div class="banner-right">
                        <form action="{% url 'tt_website_skytors:activity_search'%}" class="form-wrap" method="post">
                            {% csrf_token %}
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="row">
                                        <span class="span-search-ticket">Activity Name </span>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding:0px;">
                                            <div class="form-group">
                                                <input type="text" class="form-control" name="activity_query" id="activity_query" placeholder="Search for Activity" value="{{query}}"/>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div class="col-lg-6">

                                </div>
                            </div>
                            <div class="row">
                                <div class="col-lg-6">
                                    <div class="row">
                                        <span class="span-search-ticket"><i class="fas fa-map-marker-alt"></i> Search by Location </span>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding:0px;">
                                            <div class="form-select" id="default-select">
                                                <select class="js-example-basic-single" style="width:100%;" id="activity_countries" onchange="set_city();" size="5" data-live-search="true" name="activity_countries">
                                                    {% if not parsed_country %}
                                                    <option value="" selected="">All Country</option>
                                                    {% for country in activity_countries %}
                                                    <option value="{{country.id}}">{{country.name}}</option>
                                                    {% endfor %}
                                                    {% else %}
                                                    {% for country in activity_countries %}
                                                    {% if parsed_country == country.id %}
                                                    <option value="{{country.id}}" selected>{{country.name}}</option>
                                                    {% else %}
                                                    <option value="{{country.id}}">{{country.name}}</option>
                                                    {% endif %}
                                                    {% endfor %}
                                                    {% endif %}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6" style="padding:0px;">
                                            <div class="form-select">
                                                <div id="temp_activity_cities">
                                                    <select class="js-example-basic-single" style="width:100%;" id="activity_cities" name="activity_cities" size="5">
                                                        <option value="" selected="">Cities</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>

                                <div class="col-lg-6">
                                    <div class="row">
                                        <div class="col-lg-12 search_type">
                                            <span class="span-search-ticket"><i class="fa fa-folder-open"></i> Search by Category / Type </span>
                                        </div>
                                    </div>
                                    <div class="row">
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4 search_type">
                                            <div class="form-select">
                                                <select class="js-example-basic-single" style="width:100%;" id="activity_type" name="activity_type" data-live-search="true" size="5">
                                                    <option value="0" selected="">All Types</option>
                                                    {% for type in activity_types %}
                                                    <option value="{{type.id}}">{{type.name}}</option>
                                                    {% endfor %}
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="padding:0px;">
                                            <div class="form-select">
                                                <select class="js-example-basic-single" style="width:100%;" id="activity_category" onchange="set_sub_category();" name="activity_category" size="5">
                                                    <option value="0" selected="">All Categories</option>
                                                    {% for category in activity_categories %}
                                                    <option value="{{category.id}} - {{category.name}}">{{category.name}}</option>
                                                    {% endfor %}
                                                    <!--<option id="temp_activity_category"/>-->
                                                </select>
                                            </div>
                                        </div>
                                        <div class="col-lg-4 col-md-4 col-sm-4 col-xs-4" style="padding:0px;">
                                            <div class="form-select">
                                                <div class="js-example-basic-single" style="width:100%;" id="temp_activity_sub_category">
                                                    <select id="activity_sub_category" name="activity_sub_category" size="5">
                                                        <option value="0" selected="">Sub Categories</option>
                                                    </select>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                            <br/>

                            <button class="primary-btn text-uppercase" type="submit" value="Submit">
                                <img src="{{static_path}}img/icon/search-icon.png" style="width:25px; height:25px;"/>
                                Change Search
                            </button>
                        </form>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>


<section class="destinations-area" style="padding-top:30px; padding-bottom:40px;">
    <div class="container">
        <div class="row" style="padding-bottom:10px;">
            <div class="col-lg-12" style="margin-top:10px;">
                <ul class="progressbar">
                    <li class="active" onclick="location.href='{% url 'tt_website_skytors:index'%}';" style="cursor:pointer;"><span>Home <i class="fas fa-home"></i></span></li>
                    <li class="current"><span>Search <i class="fas fa-search"></i></span></li>
                    <li><span>Passenger <i class="fas fa-users"></i></span></li>
                    <li><span>Book <i class="fas fa-book-open"></i></span></li>
                    <li><span>Issued <i class="fas fa-check-circle"></i></span></li>
                </ul>
            </div>
        </div>
        <div class="row">
            <div class="col-lg-12" style="position:sticky; top:95px; z-index:997; background-color:#f7f7f7; display:none;" id="mybuttonsticky">
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12" style="padding-right:2px;">
                        <button class="primary-btn-ticket" style="width:100%;" data-toggle="modal" data-target="#myModalFilterSort">
                            <span style="color:white; font-size:12px;"> Filter & Sorting </span>
                        </button>
                    </div>
                </div>
            </div>
            <div class="col-lg-3">
                <div class="modal fade" id="myModalFilterSort" role="dialog">
                    <div class="modal-dialog">
                        <!-- Modal content-->
                        <div class="modal-content">
                            <div class="modal-header">
                                <h4 class="modal-title" style="color:white;"> Filter & Sorting </i></h4>
                                <button type="button" class="close" data-dismiss="modal">&times;</button>
                            </div>
                            <div class="modal-body">
                                <div class="row" style="min-height=100px; max-height:400px; overflow-y: scroll;">
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                        <div id="filter2">

                                        </div>
                                    </div>
                                    <div class="col-lg-6 col-md-6 col-sm-6 col-xs-6">
                                        <div id="sorting-flight2">

                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>

                <div class="filter-search-flight" id="filter-search-flight">
                    <div style="background-color:white; padding:10px; margin-top:20px; border:1px solid #cdcdcd" id="filter">

                    </div>
                </div>
            </div>
            <div class="col-lg-9" style="margin-top:10px;">
                <div class="row sorting-search-flight" id="sorting-search-flight">
                    <div class="col-lg-12">
                        <div id="sorting-flight" style="margin-bottom:15px; margin-top:10px;">

                        </div>
                    </div>
                </div>
                <div class="row">
                    <div class="col-lg-12 col-md-12 col-sm-12 col-xs-12">
                        <div class="row" id="activity_ticket" style="align:center;">

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

<footer class="footer-area section-gap">
    <div class="container">

        <div class="row">
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h6>About RODEX TRIP</h6>
                    <p>
                        PT. Roda Express Sukses Mandiri adalah perusahaan yang bergerak di bidang Tour & Travel dan dikenal dengan nama RODEX TOUR & TRAVEL. Rodex Tour & Travel didirikan pertama kali pada tanggal 09 September 2009 bertempat di sebuah pusat perbelanjaan terkemuka di Surabaya yaitu Mall Pakuwon Trade Center (PTC). Di bawah kepemimpinan Bapak Galuh Suryono Cipto Adi, Rodex Tour & Travel mengalami perkembangan yang signifikan dari tahun ke tahun.
                    </p>
                    <p>
                        Hingga saat ini kami telah memiliki  lebih kurang 1.000 orang reseller yang teregister dan puluhan Cabang Mitra (Citra) yang tersebar di seluruh indonesia.
                    </p>
                </div>
            </div>
            <div class="col-lg-3 col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h6>Navigation Links</h6>
                    <div class="row">
                        <div class="col">
                            <ul>
                                <li><a href="#">Home</a></li>
                                <li><a href="#">Feature</a></li>
                                <li><a href="#">Services</a></li>
                                <li><a href="#">Portfolio</a></li>
                            </ul>
                        </div>
                        <div class="col">
                            <ul>
                                <li><a href="#">Team</a></li>
                                <li><a href="#">Pricing</a></li>
                                <li><a href="#">Blog</a></li>
                                <li><a href="#">Contact</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </div>
            <div class="col-lg-3  col-md-6 col-sm-6">
                <div class="single-footer-widget">
                    <h6>Newsletter</h6>
                    <p>
                        For business professionals caught between high OEM price and mediocre print and graphic output.
                    </p>
                    <div id="mc_embed_signup">
                        <form target="_blank" action="https://spondonit.us12.list-manage.com/subscribe/post?u=1462626880ade1ac87bd9c93a&amp;id=92a4423d01" method="get" class="subscription relative">
                            <div class="input-group d-flex flex-row">
                                <input name="EMAIL" placeholder="Email Address" onfocus="this.placeholder = ''" onblur="this.placeholder = 'Email Address '" required="" type="email">
                                <button class="btn bb-btn"><span class="lnr lnr-location"></span></button>
                            </div>
                            <div class="mt-10 info"></div>
                        </form>
                    </div>
                </div>
            </div>
            <div class="col-lg-3  col-md-6 col-sm-6">
                <div class="single-footer-widget mail-chimp">
                    <h6 class="mb-20">InstaFeed</h6>
                    <ul class="instafeed d-flex flex-wrap">
                        <li><img src="{{static_path}}img/i1.jpg" alt=""></li>
                        <li><img src="{{static_path}}img/i2.jpg" alt=""></li>
                        <li><img src="{{static_path}}img/i3.jpg" alt=""></li>
                        <li><img src="{{static_path}}img/i4.jpg" alt=""></li>
                        <li><img src="{{static_path}}img/i5.jpg" alt=""></li>
                        <li><img src="{{static_path}}img/i6.jpg" alt=""></li>
                        <li><img src="{{static_path}}img/i7.jpg" alt=""></li>
                        <li><img src="{{static_path}}img/i8.jpg" alt=""></li>
                    </ul>
                </div>
            </div>
        </div>

        <div class="row footer-bottom d-flex justify-content-between align-items-center">
            <p class="col-lg-8 col-sm-12 footer-text m-0"><!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. -->
                Copyright &copy;<script>document.write(new Date().getFullYear());</script> All rights reserved by RODEX TRIP
                <!-- Link back to Colorlib can't be removed. Template is licensed under CC BY 3.0. --></p>
            <div class="col-lg-4 col-sm-12 footer-social">
                <a href="#"><i class="fa fa-facebook"></i></a>
                <a href="#"><i class="fa fa-twitter"></i></a>
                <a href="#"><i class="fa fa-dribbble"></i></a>
                <a href="#"><i class="fa fa-behance"></i></a>
            </div>
        </div>
    </div>
</footer>

<script>
    activity_login('');
    activity_filter_render();

    function go_to_detail(sequence){
        for (i in activity_data)
        {
            if(activity_data[i].sequence == sequence)
            {
                pick = JSON.stringify(activity_data[i]).replace(/'/g,'');
                document.getElementById(`csrf`+sequence).innerHTML = `{% csrf_token %}`;
                document.getElementById(`csrf`+sequence).innerHTML += `<input type='hidden' value='`+pick+`' name='activity_pick'/>`;
                document.getElementById('myForm'+sequence).submit();
            }
        }
    }


    $(document).ready(function () {
        $('.js-example-basic-single').select2();
    });
</script>

{% endblock %}
